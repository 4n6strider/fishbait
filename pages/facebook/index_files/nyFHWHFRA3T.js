if (self.CavalryLogger) { CavalryLogger.start_js(["yyodC"]); }

__d("createTooltipPortal",["ReactDOM"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReactDOM").createPortal(a,c)}e.exports=a}),null);
__d("TruncatedTextWithEntities.react",["fbt","React","SeeMore.react","TextWithEntities.react","findSplitPointForText","partitionTextAndRanges"],(function(a,b,c,d,e,f,g){__p&&__p();var h=30;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){if(!c.props.allowSeeMoreLinebreakOnLongWords||!a)return!1;if(a.length<=h)return!1;var b=/(^|\s)(\S+)$/;b=b.exec(a);a=b?b[2]:null;return!!(a&&a.length>h)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props.text||"",c=this.props.ranges||[],d=this.props.textDelightRanges||[];a=a.replace(/\s*$/,"");var e=this.props.maxLines,f=this.props.maxLength;if(f&&a.length>f){var h=this.props.truncationPercent||.6;f=Math.floor(h*f)}h=null;this.props.shouldExpand||(h=b("findSplitPointForText")(a,f,e));if(h!=null){while(a[h-1]==="\n")h--;f=b("partitionTextAndRanges")(a,c,d,h);e=b("React").createElement(b("TextWithEntities.react"),{aggregatedRanges:this.props.aggregatedRanges,interpolator:this.props.interpolator,ranges:f.before.ranges,textDelightRanges:f.before.delightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:f.before.text});if(!this.props.showSeeMore)return b("React").createElement("span",{className:this.props.className,"data-ft":this.props["data-ft"],dir:this.props.dir,lang:this.props.lang},e,b("React").createElement("span",null,g._("\u2026")));d=this.$1(f.before.text);return b("React").createElement("span",{"data-ft":this.props["data-ft"],dir:this.props.dir,lang:this.props.lang},b("React").createElement(b("SeeMore.react"),{allowSeeMoreLinebreak:d,className:this.props.className,clickCallback:this.props.markViewerHasInteracted},e,b("React").createElement(b("TextWithEntities.react"),{aggregatedRanges:this.props.aggregatedRanges,interpolator:this.props.interpolator,ranges:f.after.ranges,textDelightRanges:f.after.delightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:f.after.text})))}else return b("React").createElement("span",{"data-ft":this.props["data-ft"],dir:this.props.dir,lang:this.props.lang},b("React").createElement(b("TextWithEntities.react"),{aggregatedRanges:this.props.aggregatedRanges,className:this.props.className,imageRanges:this.props.imageRanges,interpolator:this.props.interpolator,ranges:c,showEmojisStandalone:this.props.showEmojisStandalone,textDelightRanges:this.props.textDelightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:a}))};return c}(b("React").Component);a.defaultProps={showSeeMore:!0};e.exports=a}),null);
__d("UFIBlingItem.react",["cx","fbt","NumberFormat","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=b("NumberFormat").formatInteger(this.props.count);a=a;switch(this.props.itemKey){case"like":a=h._({"Like":"Piace a {count} persona","Likes":"Piace a {count} persone"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Like":"Likes",{Like:"Like",Likes:"Likes"})]);break;case"comment":a=h._({"Comment":"Commenti: {count}","Comments":"Commenti: {count}"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})]);break;case"reaction":a=h._({"Reaction":"Reazione: {count}","Reactions":"Reazioni: {count}"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Reaction":"Reactions",{Reaction:"Reaction",Reactions:"Reactions"})]);break;case"reshare":a=h._({"Share":"Condivisioni: {count}","Shares":"Condivisioni: {count}"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Share":"Shares",{Share:"Share",Shares:"Shares"})]);break}return b("React").createElement("span",{className:"_2u_j"},a)};return c}(b("React").Component);e.exports=a}),null);
__d("UFIBlingBox.react",["cx","fbt","NumberFormat","React","UFIBlingItem.react","UFIReactionTypes"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=[],c="",d=this.props,e=d.likes,f=d.likesreduced,g=d.reactionCount,i=d.reactionCountMap;d=d.reactionCountReduced;if(e||g){i=i&&i[b("UFIReactionTypes").LIKE]["default"]!==g;a.push(b("React").createElement(b("UFIBlingItem.react"),{className:a.length>0?"mls":"",count:i?g||0:e,countreduced:i?d||"":f,itemKey:i?"reaction":"like",key:"like"}));c+=this.props.likes==1?h._("Piace a 1 persona"):h._({"*":"Piace a {count} persone"},[h._param("count",this.props.likes,[0])]);c+=" "}if(this.props.comments){g=this.props.commentsreduced;this.props.contextArgs.islivestreaming&&(g=b("NumberFormat").formatInteger(this.props.comments));a.push(b("React").createElement(b("UFIBlingItem.react"),{className:a.length>0?"mls":"",contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:g,itemKey:"comment",key:"comment"}));c+=this.props.comments==1?h._("1 commento"):h._({"*":"Commenti: {count}"},[h._param("count",this.props.comments,[0])]);c+=" "}this.props.reshares&&(a.push(b("React").createElement(b("UFIBlingItem.react"),{className:a.length>0?"mls":"",count:this.props.reshares,countreduced:this.props.resharesreduced,itemKey:"reshare",key:"reshare"})),c+=this.props.reshares==1?h._("1 condivisione"):h._({"*":"Condivisioni: {count}"},[h._param("count",this.props.reshares,[0])]));if(this.props.readOnly)return b("React").createElement("span",{"aria-label":c},a);else{e=this.props.contextArgs.commentajaxify;return b("React").createElement("a",{ajaxify:e,href:this.props.permalink,"data-ft":this.props["data-ft"],"data-comment-prelude-ref":this.props["data-comment-prelude-ref"],"aria-label":c,onClick:this.props.onClick,rel:e?"dialog":"ignore"},a)}};return c}(b("React").Component);c.propTypes={contextArgs:a.object.isRequired,"data-ft":a.string,"data-comment-prelude-ref":a.string,comments:a.number,commentsreduced:a.string,likes:a.number,likesreduced:a.string,nfb:a.number,onClick:a.func,permalink:a.string,reactionCount:a.number,reactionCountMap:a.object,reactionCountReduced:a.string,reshares:a.number,resharesreduced:a.string,readOnly:a.bool};e.exports=c}),null);
__d("UFIBling.react",["CommentPrelude","CommentSection","FeedbackSourceType","React","SutroBlingBarGatingConfig","TrackingNodes","UFIBlingBox.react","UFIReactionsBlingSocialSentence.react","UFISharedDispatcher","UFIStoryAction","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","URI","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props.contextArgs,d=this.props.feedbackTarget,e=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.BLINGBOX),f=d.permalink,g=new(b("URI"))(f).addQueryData({comment_tracking:e}).toString();c.islivestreaming?f=b("UFIToplevelStreamedCommentList").getCommentList(c.ftentidentifier).getDisplayedCommentCount():c.isActiveLivingRoom?f=b("UFIToplevelStreamedCommentList").getCommentList(c.ftentidentifier,c.instanceid).getDisplayedCommentCount():f=b("UFIToplevelPagedCommentList").getCommentList(c.ftentidentifier,d.defaultcommentorderingmode,b("CommentSection").DEFAULT).getDisplayedCommentCount();var h=b("SutroBlingBarGatingConfig").enabled,i=(c.feedbackMode==="none"||c.feedbackMode==="toggle")&&c.hasReactions&&d.displayreactions,j=function(d){d.preventDefault();if(i&&c.feedbackMode==="expanded")a.$1();else if(c.source===b("FeedbackSourceType").COMPACT_SEARCH){var e=c.commentredirecturi!=null?new(b("URI"))(c.commentredirecturi):new(b("URI"))(g);e!=null&&e.go()}else b("CommentPrelude").onBlingboxClick(d.currentTarget),c.disableinlinetoggle||a.props.onCommentVisibilityChanged&&a.props.onCommentVisibilityChanged()};if(i||h||this.props.contextArgs.source===b("FeedbackSourceType").TAHOE){this.props.contextArgs.source===b("FeedbackSourceType").TAHOE&&(f=0);return b("React").createElement(b("UFIReactionsBlingSocialSentence.react"),{aboveUFI:h,commentCount:f,contextArgs:c,"data-comment-prelude-ref":"action_link_bling","data-ft":e,feedback:d,href:g,onCommentClick:j})}else{var k,l,m;c.hasReactions&&(k=d.reactioncount,l=d.reactioncountmap,m=d.reactioncountreduced);return b("React").createElement(b("UFIBlingBox.react"),{comments:f,commentsreduced:d.commentcountreduced,contextArgs:c,"data-comment-prelude-ref":"action_link_bling","data-ft":e,likes:d.likecount,likesreduced:d.likecountreduced,nfb:d.nfbcount,onClick:j,permalink:g,reactionCount:k,reactionCountMap:l,reactionCountReduced:m,reshares:d.sharecount,resharesreduced:d.sharecountreduced,readOnly:c.readonly})}};d.$1=function(){b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(this.props.contextArgs))};return c}(b("React").Component);e.exports=a}),null);
__d("UFICommentActionLink.react",["cx","fbt","Arbiter","React","UFICommentLink.react","UFISharedDispatcher","UFIStoryAction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("Arbiter").subscribe("UFIAction/"+this.props.contextArgs.ftentidentifier+"/showComments",function(c,d){if(!d)return;b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(a.props.contextArgs))})};d.componentWillUnmount=function(){this.$1&&b("Arbiter").unsubscribe(this.$1)};d.render=function(){__p&&__p();var a=this,c=this.props.contextArgs,d=c.commentredirecturi;c=c.loggedOutLinkConfig;var e=h._("Commenta"),f;c&&c.showCommentLink&&(f=c.commentAjaxifyURI);if(f)return b("React").createElement("span",{className:"_6a _15-3 _3h-u _4k43"},b("React").createElement(b("UFICommentLink.react"),{ajaxify:f,rel:"dialog"},e));else if(d)return b("React").createElement("span",{className:"_6a _15-6 _3h-u _4k43"},b("React").createElement(b("UFICommentLink.react"),{href:d},e));return b("React").createElement("span",{className:"_6a _15-7 _3h-u _4k43"},b("React").createElement(b("UFICommentLink.react"),{onClick:function(c){c.preventDefault(),b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(a.props.contextArgs))}},e))};return c}(b("React").Component);c.propTypes={contextArgs:a.object.isRequired};e.exports=c}),null);
__d("UFIAddReactionButton.react",["ix","cx","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_6fy0"},b("React").createElement("span",{className:"_6fva"},"+"),b("React").createElement(b("Image.react"),{src:g("601195")}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("UFILikeActionLink.react",["React","UFILikeLink.react","UFIReactionsLinkImpl.react","UFIReactionTypes","UFIStoryAction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onClick=function(a){a.preventDefault();var c=d.props.contextArgs.loggedOutLinkConfig;if(c)return;c=d.props.feedback.hasviewerliked;d.context.dispatch(b("UFIStoryAction").changeReaction(d.props.contextArgs,c?b("UFIReactionTypes").NONE:b("UFIReactionTypes").LIKE,a.target))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props,c=a.contextArgs;a=a.feedback;if(!c.showLikeNuxForGroupMallAds&&c.hasReactions&&a.canviewerreact&&b("UFIReactionsLinkImpl.react"))return b("React").createElement(b("UFIReactionsLinkImpl.react"),{contextArgs:c,nuxConfig:c.reactionsNuxConfig,reaction:a.viewerreaction,suggestedReaction:a.suggestedreaction,supportedReactions:a.supportedreactions});else{var d=c.loggedOutLinkConfig,e=null;d&&d.showLikeLink&&(e=d.likeAjaxifyURI);return b("React").createElement(b("UFILikeLink.react"),{ajaxify:e,likeAction:!a.hasviewerliked,onClick:this.onClick,rel:e?"dialog":null,forcelegacyrendering:c.forcelegacyrendering,showLikeNuxForGroupMallAds:c.showLikeNuxForGroupMallAds,likeNuxContent:c.groupMallAdsCommentNuxContent})}};return c}(b("React").Component);c.contextTypes={dispatch:a.func};c.propTypes={feedback:a.object.isRequired,contextArgs:a.object.isRequired};e.exports=c}),null);
__d("UFISaveActionLink.react",["ix","cx","fbt","Bootloader","Image.react","React","SutroStoryHeaderUFIGatingConfig","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=function(){var a=d.state.showSave;b("Bootloader").loadModules(["AsyncRequest","CollectionCurationMechanisms","CollectionsDisplaySurface","SavedStateActions","XSaveController"],function(b,c,e,f,g){f=a?f.SAVE:f.UNSAVE;d.props.onClick&&d.props.onClick(f);new b().setData({action:f,mechanism:c.SAVED_UFI,story_id:d.props.storyID,surface:e.CAMPFIRE_NOTE}).setHandler(function(b){b.error===0&&d.setState({showSave:!a})}).setURI(g.getURIBuilder().getURI()).send()},"UFISaveActionLink.react")};d.state={showSave:!c.isSaved};return d}var d=c.prototype;d.render=function(){var a=this.state.showSave?i._("Salva"):i._("Rimuovi dagli elementi salvati"),c=null;if(!b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi){var d=this.state.showSave?g("122454"):g("138474");c=b("React").createElement(b("Image.react"),{src:d})}return b("React").createElement("span",{className:"_6a _38qe"+(b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _38qf":"")},b("React").createElement("a",{"aria-pressed":!this.state.showSave,className:(this.state.showSave?"":"_38qg")+(b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _38qh":""),href:"#",onClick:this.$1,role:"button"},c,a))};return c}(b("React").Component);e.exports=a}),null);
__d("UFIShareActionLink.react",["Promise","ActorURI","Arbiter","Bootloader","React","ReactShareButtonGatedModule","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIShareLink.react","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReactShareButtonGatedModule").module,h=b("ReactShareButtonGatedModule").should_use_groups_dialog,i=b("ReactShareButtonGatedModule").store;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=!1,d.state={confirmed:!1,openOnInitOverride:!1,interceptedAndWantedToShareAnyways:!1},d.$3=function(){!d.$1&&!d.$2&&(d.$1=b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_SHARE_DIALOG_OPENS))},d.$4=function(){d.$2=!1},d.$5=function(){d.$1&&(b("UFICommonInteractionLogger").endInteraction(d.$1),d.$1=null),d.$2=!0,d.$6()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.state,d=c.confirmed;c=c.openOnInitOverride;var e=this.props,f=e.shareURI,j=e.shareRel,k=e.shareNowMenuURI,l=e.feedbackReferrer,m=e.feedbackSource,n=e.feedbackTarget,o=e.misinformationConfirmDialogURI;e=e.interceptForPagePost;if(o&&!d)return b("React").createElement(b("UFIShareLink.react"),{href:"#",onClick:function(){a.$7(o),a.$6()}});if(e&&n&&n.ownerid&&!this.state.interceptedAndWantedToShareAnyways)return b("React").createElement(b("UFIShareLink.react"),{href:"#",onClick:function(){return a.$8(n.ownerid)}});d={feedback_referrer:l,feedback_source:m};e=n&&n.actorforpost;e&&(f=f&&b("ActorURI").create(f,e),k=k&&new(b("URI"))(k).addQueryData("actor_id",e).toString());if(h){e={default_audience:"silent_disco",feedback_referrer:l,feedback_source:m};i&&i.setShareNowURI(this.props.feedbackTarget?this.props.feedbackTarget.sharefbid:null,k);return b("React").createElement(b("UFIShareLink.react"),{href:new(b("URI"))(f).addQueryData(e),rel:j,openOnInit:c,onClick:function(){return a.$6()}})}return k?b("React").createElement(g,{endpoint:k,endpointData:d,openOnInitOverride:c||this.state.interceptedAndWantedToShareAnyways,onMouseUp:this.$3,onShow:this.$5,onHide:this.$4}):b("React").createElement(b("UFIShareLink.react"),{href:new(b("URI"))(f).addQueryData(d),rel:j,openOnInit:c,onClick:function(){a.$6()}})};d.$6=function(){this.props.feedbackTarget&&b("Arbiter").inform("share_initiated",{entidentifier:this.props.feedbackTarget.entidentifier})};d.$8=function(a){__p&&__p();var c=this;b("Bootloader").loadModules(["PagePostEngagementFrictionActions","promiseDone"],function(d,e){var f=new(b("Promise"))(function(b,c){d.showReshareEngagementFrictionDialog(a,function(){return b(!0)},function(){return b(!1)},function(){b(!1),d.goToPage(a)})}).then(function(a){a&&(c.setState({interceptedAndWantedToShareAnyways:!0}),c.$6())},function(a){throw a});e(f)},"UFIShareActionLink.react")};d.$7=function(a){var c=this;b("Bootloader").loadModules(["AsyncDialog","AsyncRequest","ShareWarningFactCheckLinkLogger"],function(b,d,e){b.send(new d(a),function(a){a.subscribe("confirm",function(){c.setState({confirmed:!0,openOnInitOverride:!0})}),e.addReshareLoggingToDialog(a)})},"UFIShareActionLink.react")};return c}(b("React").Component);c.propTypes={feedbackTarget:a.object,shareURI:a.string,shareRel:a.string,shareNowMenuURI:a.string,shareLinkHref:a.string,feedbackReferrer:a.string,feedbackSource:a.number,misinformationConfirmDialogURI:a.string,interceptForPagePost:a.bool};e.exports=c}),null);
__d("UFISubscribeActionLink.react",["cx","fbt","React","SutroStoryHeaderUFIGatingConfig","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.isSubscribed?h._("Aggiornamenti attivati"):h._("Ricevi gli aggiornamenti");return b("React").createElement("span",{className:"_6a _7kt6 _7kt7"},b("React").createElement("a",{"aria-pressed":this.props.isSubscribed,className:(this.props.isSubscribed?"_7kt8":"")+(b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _7kt9":""),href:"#",onClick:this.props.onClick,role:"button"},a))};return c}(b("React").Component);a.defaultProps={onClick:b("emptyFunction")};e.exports=a}),null);
__d("UFIActionLinks.react",["cx","fbt","BanzaiODS","BootloadedComponent.react","EntstreamFeedObjectFollow","EntstreamFeedObjectSave","FBFeedLocations","FeedbackSourceType","JSResource","React","SutroBlingBarGatingConfig","SutroStoryHeaderUFIGatingConfig","UFIBling.react","UFICommentActionLink.react","UFIConfig","UFIInstanceAction","UFILikeActionLink.react","UFIPrivateReplyLink.react","UFISaveActionLink.react","UFIShareActionLink.react","UFISharedDispatcher","UFISubscribeActionLink.react","UFIUserActions","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this.$1();b("BanzaiODS").bumpEntityKey("feedback",a)};d.renderActorSelector=function(){if(this.props.hideActorSelector||this.props.contextArgs.disableCommentAndLikeForGroupAds)return null;var a=this.props.contextArgs,c=a.actorSelectorConfig;a=a.hasReactions;if(!c)return null;var d=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,e=c.module;return b("React").createElement("div",{className:"_40yk"+(d?" _610g":"")+(d?" _610h":"")+(a?" _pbn":"")},b("React").createElement(e,c.props))};d.renderActionList=function(){var a=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink(),this.renderSaveLink(),this.renderSubscribeLink(),this.renderPostNowLink(),this.renderEditPostLink()];a=a.filter(function(a){return a}).map(function(a,c){return b("React").createElement("span",{className:"_1mto",key:c},a)});if(a.length)return b("React").createElement("div",{className:"_42nr _1mtp"},a);else return null};d.renderBling=function(){var a=this,c=this.shouldRenderBling();return!c?null:b("React").createElement(b("UFIBling.react"),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").toggleComments(a.props.contextArgs))}})};d.renderLikeLink=function(){var a=this.props,c=a.contextArgs;a=a.feedbacktarget;var d=c.loggedOutLinkConfig,e=c.disableCommentAndLikeForGroupAds;if(e)return null;return!a.hasviewerliked&&!a.viewercanlike&&!(d&&d.showLikeLink)?null:b("React").createElement(b("UFILikeActionLink.react"),{feedback:a,contextArgs:c})};d.renderCommentLink=function(){__p&&__p();var a=this.props.contextArgs.disableCommentAndLikeForGroupAds;if(a||this.props.contextArgs.hideComments||this.props.contextArgs.showsavelink||this.props.contextArgs.showsubscribelink)return null;a=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(a&&a.showCommentLink)){a=this.props.contextArgs.disabledCommentTooltip;if(a){var c=h._("Commenta");return b("React").createElement("span",null,b("React").createElement("span",{className:"_1ysv","data-hover":"tooltip","data-tooltip-content":a},c))}return null}return b("React").createElement(b("UFICommentActionLink.react"),{contextArgs:this.props.contextArgs})};d.$1=function(){var a=this.props.contextArgs.shareLinkConfig;if(!a)return"ufi-share-link.unavailable";a=this.props.contextArgs.loggedOutLinkConfig;return a&&a.showShareLink?"ufi-share-link.loggedout":"ufi-share-link.render"};d.renderShareLink=function(){var a=this.props.contextArgs.shareLinkConfig;if(!a)return null;var c=this.props.contextArgs.loggedOutLinkConfig;c&&c.showShareLink&&(a.shareURI=c.shareAjaxifyURI);return b("React").createElement(b("UFIShareActionLink.react"),babelHelpers["extends"]({feedbackTarget:this.props.feedbacktarget,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},a))};d.renderPrivateReplyLink=function(){var a=this.props,c=a.contextArgs;a=a.feedbacktarget;var d=a.actorforpost;a=a.messagereplycontext;if(!b("UFIPrivateReplyLink.react").willRender(a,d))return null;return!a?null:b("React").createElement(b("UFIPrivateReplyLink.react"),{actorID:d,activityID:c.ftentidentifier,context:a,seeResponseLabel:!1,shouldShowNuxToPage:c.shouldShowPrivateReplyNuxToPage,shouldShowGeneralNuxContent:c.shouldShowGeneralPrivateReplyNuxContent})};d.renderEmbedLink=function(){var a=this.props.contextArgs.shareLinkConfig;if(!a||!a.embedURI)return null;var c=h._("Incorpora");return b("React").createElement("span",{className:"_4q8d _1mtq"},b("React").createElement("a",{href:a.embedURI,rel:"dialog",className:"_2g1w"},c))};d.renderSaveLink=function(){if(!this.props.contextArgs.showsavelink)return null;var a=this.props.contextArgs,c=a.isSaved,d=a.feedcontext,e=a.saveFollowupMarkup;a=a.saveStoryID;var f=JSON.parse(d).object_element_id;return b("React").createElement(b("UFISaveActionLink.react"),{isSaved:c,onClick:function(a){if(!f)return;b("EntstreamFeedObjectSave").toggleSaveFromUFI(f,e,a)},storyID:a})};d.renderSubscribeLink=function(){if(!this.props.contextArgs.showsubscribelink)return null;var a=this.props.contextArgs,c=a.ftentidentifier,d=a.rootid,e=a.source,f=this.props.feedbacktarget,g=f.hasviewersubscribed;return b("React").createElement(b("UFISubscribeActionLink.react"),{isSubscribed:g,onClick:function(a){a=a.target;if(!(a instanceof Element))return;b("EntstreamFeedObjectFollow").toggleFollowFromUFI(d,c,g?"follow_post":"unfollow_post");b("UFIUserActions").changeSubscribe(c,!g,{source:e,target:a,rootid:d,commentexpandmode:f.commentexpandmode})},postID:c})};d.renderPostNowLink=function(){try{var a=this.props.contextArgs,c=a.feedcontext;a=a.ftentidentifier;c=JSON.parse(c).location_type;return c===b("FBFeedLocations").GROUP_DRAFT_POSTS?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIPostNowActionLink.react").__setRef("UFIActionLinks.react"),bootloadPlaceholder:b("React").createElement("div",null),groupID:this.props.feedbacktarget.grouporeventid,postID:a}):null}catch(a){return null}};d.renderEditPostLink=function(){try{var a=this.props.contextArgs,c=a.feedcontext;a=a.ftentidentifier;var d=JSON.parse(c).location_type;return d===b("FBFeedLocations").GROUP_DRAFT_POSTS?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIEditPostActionLink.react").__setRef("UFIActionLinks.react"),bootloadPlaceholder:b("React").createElement("div",null),feedContext:c,postID:a}):null}catch(a){return null}};d.renderSearchFeedback=function(){var a=this.props.contextArgs.inlineSearchFeedbackConfig;return!a?null:b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("InlineFeedback.react").__setRef("UFIActionLinks.react")},a))};d.renderCrowdsourceLabelingContainer=function(){return!b("UFIConfig").showUFICrowdsource?null:b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFICrowdsourceLabelingContainer.react").__setRef("UFIActionLinks.react"),feedback:this.props.feedbacktarget,contextArgs:this.props.contextArgs})};d.renderLayout=function(a,c,d){c=c.map(function(a,c){return a&&b("React").createElement("div",{className:"_3m9g",key:c},a)}).filter(function(a){return a});return!a&&c.length===0?null:b("React").createElement("div",{className:b("joinClasses")("_3399",d)},c,b("React").createElement("div",{className:"_524d"},a))};d.shouldRenderBling=function(){__p&&__p();var a=this.props.contextArgs,c=a.feedcontext,d=a.source;a=a.showBling;var e=null;if(c)try{e=JSON.parse(c).location_type}catch(a){}if(e===b("FBFeedLocations").GOODWILL_THROWBACK_PROMOTION||e===b("FBFeedLocations").GOODWILL_THROWBACK_SHARE)return!1;if(d===b("FeedbackSourceType").TAHOE)return!this.props.hideBling;c=b("SutroBlingBarGatingConfig").enabled;return a||c&&!this.props.hideBling};d.shouldRenderActionButtons=function(){var a=null,c=this.props.contextArgs.source;if(this.props.contextArgs.feedcontext)try{a=JSON.parse(this.props.contextArgs.feedcontext).location_type}catch(a){}return a===b("FBFeedLocations").GOODWILL_THROWBACK_PERMALINK||a===b("FBFeedLocations").GOODWILL_THROWBACK_PROMOTION||a===b("FBFeedLocations").GOODWILL_THROWBACK_SHARE||a===b("FBFeedLocations").GROUP_SUGGESTIONS_WITH_STORY||c===b("FeedbackSourceType").LIVE_WWW_BROADCASTING||c===b("FeedbackSourceType").COMPACT_SEARCH||c===b("FeedbackSourceType").LIVE_VIDEO_STORIES?!1:!0};d.hasCounts=function(){return!!(this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount)||this.props.feedbacktarget.reactioncount>0&&(b("SutroBlingBarGatingConfig").enabled||this.props.contextArgs.showBling||this.props.contextArgs.source===b("FeedbackSourceType").TAHOE)};d.render=function(){__p&&__p();var a=this.renderActorSelector(),c=this.renderSearchFeedback(),d=[],e=[],f=this.props.contextArgs.disableCommentAndLikeForGroupAds,g=null,h=b("SutroBlingBarGatingConfig").enabled,i=this.renderBling();this.props.contextArgs.showBling&&!h?(d.push(a),this.hasCounts()?g=this.renderLayout(null,[c],"_1f6t"):e.push(c)):(d.push(a),d.push(c));h=this.props.contextArgs.source===b("FeedbackSourceType").COMPACT_SEARCH;a=this.shouldRenderActionButtons();c=b("SutroStoryHeaderUFIGatingConfig").enabled_hide_ufi_border&&a;h="_1f6t"+(h?" _24vt":"")+(this.props.contextArgs.hasReactions?" _4_dr":"")+(c&&this.props.contextArgs.source!==b("FeedbackSourceType").PHOTOS_SNOWLIFT&&this.props.contextArgs.source!==b("FeedbackSourceType").WORKPLACE_DISCOVERY_FEED?" _20h5":"");var j=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,k=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi_animation,l=b("SutroBlingBarGatingConfig").enabled;a=a?this.renderLayout(this.renderActionList(),d,"_a7s"+(c?" _20h6":"")+(j?" _610i":"")+(j?" _610j":"")+(j&&k?" _125r":"")+(l?" _2h27":"")+" clearfix _zw3"+(f?" _r9u":"")):null;d=this.renderCrowdsourceLabelingContainer();return b("React").createElement("div",{ref:"root",className:"_57w"},g,this.hasCounts()?this.renderLayout(i,e,h):null,a,d)};return c}(b("React").Component);e.exports=a}),null);
__d("UFIActionHeader.react",["cx","FeedbackSourceType","FluxContainer","React","UFIActionLinks.react","UFICommercialBreakStore","UFIDispatcherContext.react","UFIPlayLiveVODHighlightsStore","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={inCommercialBreak:!1,isPlayingLiveVODHighlights:!1},b)||babelHelpers.assertThisInitialized(c)}c.getStores=function(){return[b("UFICommercialBreakStore"),b("UFIPlayLiveVODHighlightsStore")]};c.calculateState=function(a,c){a=c.contextArgs.instanceid;return{inCommercialBreak:b("UFICommercialBreakStore").getValueFor(a),isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(a)}};var d=c.prototype;d.$1=function(){var a=this,c=b("ifRequired")("UFIVideoPlayerRegistry",function(b){return b.getAvailableVideoPlayerController(a.props.contextArgs.instanceid)});c=c&&c.getOption("VideoWithInstreamVideo","controller");c=c&&c.getConfig();return c};d.$2=function(){__p&&__p();var a=this.props.contextArgs.source;a=a===b("FeedbackSourceType").COMPACT_SEARCH;a=b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.props.dispatcher,stores:this.props.stores},b("React").createElement(b("UFIActionLinks.react"),{contextArgs:this.props.contextArgs,feedbacktarget:this.props.feedbacktarget,hideActorSelector:a}));if(this.state.isPlayingLiveVODHighlights)return b("React").createElement("div",{className:"_f_s"},a);if(!this.state.inCommercialBreak)return a;var c=this.$1();c=c&&c.vodTransitionVersion!==0;return!c?null:b("React").createElement("div",{className:"_4hqd"},a)};d.render=function(){return b("React").createElement("div",null,this.$2())};return c}(b("React").Component);e.exports=b("FluxContainer").create(a,{withProps:!0,pure:!1})}),null);
__d("UFILiveTypingIndicatorContainer.react",["BootloadOnRender.react","FluxContainer","JSResource","LazyComponent.react","React","UFILiveTypingIndicator","UFILiveTypingStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").Component;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.state={everHadTyping:!1,hasTyping:!1,friendTyping:!1};return b}c.getStores=function(){return[b("UFILiveTypingStore")]};c.calculateState=function(a,c){if(!b("UFILiveTypingIndicator").isEnabled())return{everHadTyping:!1,hasTyping:!1,friendTyping:!1};var d=!!b("UFILiveTypingStore").getState()[c.feedbackTargetID];return{everHadTyping:(a||{}).everHadTyping||d,hasTyping:d,friendTyping:b("UFILiveTypingStore").isFriendTyping(c.feedbackTargetID)}};var d=c.prototype;d.shouldComponentUpdate=function(a,b){return a.feedbackTargetID!=this.props.feedbackTargetID||b.everHadTyping!=this.state.everHadTyping||b.hasTyping!=this.state.hasTyping};d.render=function(){return this.state.everHadTyping?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("UFILiveTypingIndicator.react").__setRef("UFILiveTypingIndicatorContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),babelHelpers["extends"]({},this.props,this.state))}):null};return c}(a);e.exports=b("FluxContainer").create(c,{pure:!1,withProps:!0})}),null);
__d("UFICommentListVisibilityTracker.react",["cx","OnVisible.react","React","SubscriptionsHandler","UFIInstanceAction","UFISharedDispatcher","UFIVisibility","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("React").Children;a=b("React").Component;c=b("React").PropTypes;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.state={isVisible:!1};d.onVisible=function(){d.setState({isVisible:!0}),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").changeCommentListVisibility(d.props.contextArgs,b("UFIVisibility").VISIBLE))};d.onHidden=function(){d.setState({isVisible:!1}),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").changeCommentListVisibility(d.props.contextArgs,b("UFIVisibility").HIDDEN))};d.$1=new(b("SubscriptionsHandler"))();return d}var d=c.prototype;d.shouldComponentUpdate=function(a,c){return!b("gkx")("678285")&&this.state.isVisible!==c.isVisible?!1:!0};d.render=function(){var a=h.only(this.props.children),c=b("gkx")("678285");return b("React").createElement("div",{"data-debugstate":c?this.state.isVisible?"partially visible":"hidden":null,className:"_3b-9"+(c?" _3b-a":"")+(c&&this.state.isVisible?" _3b-b":"")+(c&&!this.state.isVisible?" _3b-c":"")+" _j6a",onScroll:this.props.onScroll,ref:this.props.inputRef},b("React").createElement(b("OnVisible.react"),{onVisible:this.onVisible,onHidden:this.onHidden},a))};return c}(a);d.propTypes={contextArgs:c.shape({instanceid:c.string.isRequired,location:c.string}).isRequired};e.exports=d}),null);
__d("UFICommentVPVDTracker.react",["cx","FBLogger","React","ReactDOM","SubscriptionsHandler","UFICommentAction","UFICommentVisibilityStore","UFICommentVPVD","UFICommentVPVDLoggingConfig","UFICommentVPVDState","UFISharedDispatcher","UFIVisibility","ViewportTrackingHelper","gkx","onCommentIsVisible"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("React").Children;a=b("React").PropTypes;function i(a){return b("UFICommentVisibilityStore").getVisibility(b("UFICommentVisibilityStore").getState(),a.contextArgs)===b("UFIVisibility").VISIBLE}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=null;d.state={isVisible:!1,beforeFirstViewportChange:!0};d.$4=function(a){d.$1=a,b("UFICommentVPVDState").initComment(d.props.renderedComment,d.props.contextArgs,a)};d.isCommentVisible=function(a){if(!i(d.props)&&!d.state.beforeFirstViewportChange)return!1;a={height:a.bottom-a.top,width:0};return b("ViewportTrackingHelper").isVisibleInDimension(a,b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)),b("UFICommentVPVDLoggingConfig").minVisibleSize)};d.onCommentVisibilityChanged=function(a){d.setState({isVisible:a,beforeFirstViewportChange:!1}),d.$3(a)};b("UFICommentVPVD").init();d.$2=new(b("SubscriptionsHandler"))();return d}var d=c.prototype;d.componentDidMount=function(){if(this.$1==null){b("FBLogger")("ufi").mustfix("When intializing VPVd tracking for a comment, could not obtain a reference to the HTML element representing the comment.");return}this.$2.addSubscriptions(b("onCommentIsVisible")(this.$1,this.isCommentVisible,this.onCommentVisibilityChanged))};d.componentWillUnmount=function(){this.$3(!1),this.$2.release()};d.render=function(){var a=this.props,c=this.state;a=h.only(a.children);var d=b("gkx")("678285");return b("React").createElement("div",{"data-debugstate":d?c.isVisible?"fully visible":"not fully visible":null,className:"_3b-9"+(d?" _3b-a":"")+(d&&c.isVisible?" _3b-b":"")+(d&&!c.isVisible?" _3b-c":""),ref:this.$4},a)};d.$3=function(a){var c=this;setTimeout(function(){return b("UFISharedDispatcher").dispatch(b("UFICommentAction").changeVisibility(c.props.contextArgs,c.props.renderedComment,a?b("UFIVisibility").VISIBLE:b("UFIVisibility").HIDDEN))},0)};return c}(b("React").Component);c.propTypes={renderedComment:a.object.isRequired,contextArgs:a.object.isRequired};e.exports=c}),null);
__d("CommentsTimeSpentTracker.react",["Banzai","CommentsTimeSpentTypedLogger","Event","OnVisible.react","React","SubscriptionsHandler","TimeSlice","UFIOrderingModeStore","UserActivity","pageID","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"CommentsTimeSpentTracker",firstVisibleTime:0,listeners:new(b("SubscriptionsHandler"))(),propTypes:{contextArgs:a.object.isRequired,targetFBID:a.string.isRequired,viewerHasInteracted:a.bool.isRequired,timeToConsiderViewerInactiveMillis:a.number,pollViewerActivityIntervalMillis:a.number},getDefaultProps:function(){return{timeToConsiderViewerInactiveMillis:3e4,pollViewerActivityIntervalMillis:1e3}},render:function(){return b("React").createElement(b("OnVisible.react"),{onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children)},startInterval:function(){this.firstVisibleTime===0&&(this.firstVisibleTime=this._getTimeInSeconds(),this._checkForIdleViewer())},finishInterval:function(){var a=b("UFIOrderingModeStore").getState().get(this.props.contextArgs.instanceid);if(this.firstVisibleTime&&this.isMounted()){var c=this._getTimeInSeconds();c>this.firstVisibleTime&&new(b("CommentsTimeSpentTypedLogger"))().setViewerHasInteracted(this.props.viewerHasInteracted).setOrderingMode(a).setPostFbid(this.props.targetFBID).setStartTime(this.firstVisibleTime).setEndTime(c).setTimeSpentID(b("pageID")).log();this.firstVisibleTime=0}},componentDidMount:function(){this.listeners.addSubscriptions(b("Banzai").subscribe(b("Banzai").SHUTDOWN,this.finishInterval),b("Event").listen(window,"blur",this.finishInterval))},componentWillUnmount:function(){this.finishInterval(),this.listeners.release()},componentDidUpdate:function(){this.finishInterval()},_getTimeInSeconds:function(){return Math.floor(Date.now()/1e3)},_checkForIdleViewer:function(){var a=this;if(this.firstVisibleTime===0)return;b("UserActivity").isActive(this.props.timeToConsiderViewerInactiveMillis)?b("setTimeout")(b("TimeSlice").guard(function(){a._checkForIdleViewer()},"CommentsTimeSpentTracker checkForIdleViewer",{propagationType:b("TimeSlice").PropagationType.EXECUTION}),this.props.pollViewerActivityIntervalMillis):this.finishInterval()}});e.exports=c}),null);
__d("UFIBusinessActorIcon.react",["cx","AppUserRoleConstants.brands","BusinessActorUtils.brands","React","getObjectValues","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("BusinessActorUtils.brands").getInitials(this.props.firstName,this.props.lastName),c=this.props.businessRole===b("AppUserRoleConstants.brands").ADMIN;return b("React").createElement("div",{className:b("joinClasses")(this.props.classNames,"_1rpl")},b("React").createElement("div",{className:b("joinClasses")(this.props.textClassNames,c?"_1rpm":null)},a))};return c}(b("React").Component);c.propTypes={firstName:a.string.isRequired,lastName:a.string.isRequired,classNames:a.string,textClassNames:a.string,businessRole:a.oneOf(b("getObjectValues")(b("AppUserRoleConstants.brands")))};e.exports=c}),null);
__d("UFIActorIconContainer.react",["cx","ClickableArea.react","Image.react","JSResource","React","ShortProfiles","UFIBusinessActorIcon.react","XUISpinner.react","joinClasses","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("UFIActorSelector.react").__setRef("UFIActorIconContainer.react")),i=b("React").createElement(b("XUISpinner.react"),{size:"large"});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={actor:null,showActorSelectorDialog:!1},c.$2=function(){c.setState(function(a){return{showActorSelectorDialog:!a.showActorSelectorDialog}})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1(this.props.actorID)};d.componentDidUpdate=function(a){this.props.actorID!==a.actorID&&this.$1(this.props.actorID)};d.$1=function(a){var c=this;b("ShortProfiles").get(a,function(a){return c.setState({actor:a})})};d.render=function(){var a=this.state.actor;if(!a)return this.props.tinyIcon?b("React").createElement(b("XUISpinner.react"),{size:"small"}):i;var c;this.props.tinyIcon?c=b("joinClasses")("img UFIActorImage _3tm9",this.props.className):this.props.smallIcon?c=b("joinClasses")("img UFIActorImage _3qxe",this.props.className):c=b("joinClasses")("img UFIActorImage _54ru",this.props.className);var d=this.props.actorSelectorConfig!=null&&this.props.isLivingRoom&&this.props.overlayActorSelectorOnUFIPhoto===!0;d&&(c=b("joinClasses")("UFIActorImageWithSelector",c));d=a.isBusinessPersona?b("React").createElement(b("UFIBusinessActorIcon.react"),{classNames:c,firstName:a.firstName,lastName:a.lastName,textClassNames:"UFIBusinessActorIconText"}):b("React").createElement(b("Image.react"),{alt:a.name,className:c,src:a.thumbSrc});return this.props.actorSelectorConfig!=null&&this.props.isLivingRoom&&this.props.overlayActorSelectorOnUFIPhoto===!0?b("React").createElement("div",{className:"UFIActorImageContainer"},b("React").createElement(b("ClickableArea.react"),{onClick:this.$2},b("React").createElement("div",{className:"UFIActorSelectorOverlay"})),b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(h,babelHelpers["extends"]({},this.props.actorSelectorConfig.props,{dialogShown:this.state.showActorSelectorDialog,useUFIPhotoOverlay:!0,onActorChange:this.props.onActorChange}))),d):d};return c}(b("React").Component);e.exports=a}),null);
__d("UFIAttachMediaSection.react",["cx","fbt","Bootloader","Focus","React","UFICommentFileInputAcceptValues","XUIError.react","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={bootloaded:!1,hasUploadFailure:!1},d.$1=null,d.$2=null,d.$3=function(){d.setState({hasUploadFailure:!1})},d.$4=function(){d.setState({hasUploadFailure:!1})},d.$5=function(){d.setState({hasUploadFailure:!0})},d.$6=function(a){d.props.onClick&&d.props.onClick();if(d.state.bootloaded)return;b("Bootloader").loadModules(["UFIUploader"],function(a){d.$1=new a(d.refs.inputContainer,d.refs.inputControl,d.refs.input,d.props.getPhotoUploadData,d.props.getFileUploadData,d.props.prepareForAttachedPhotoPreview,d.props.prepareForAttachedVideoPreview,d.props.prepareForAttachedFilePreview,d.props.onPhotoUploadComplete,d.props.onVideoEncodeUpdate,d.props.onVideoUploadUpdate,d.props.onVideoUploadComplete,d.props.onFileUploadComplete,d.props.setFileInput,d.props.viewerActorID,d.$3,d.$4,d.$5)},"UFIAttachMediaSection.react");d.setState({bootloaded:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this.refs,c=a.input;a=a.inputControl;c&&a&&(this.$2=b("Focus").relocate(c,a))};d.componentWillUnmount=function(){this.$1&&this.$1.destroy(),this.$2&&(this.$2.remove(),this.$2=null)};d.render=function(){var a=b("gkx")("678288")&&this.props.allowFileAttachments,c=a?h._("Allega un file"):this.props.allowVideoAttachments?h._("Allega una foto o un video"):h._("Allega una foto"),d=a?h._("Si \u00e8 verificato un problema durante il tentativo di allegare il file, riprova"):h._("Si \u00e8 verificato un problema durante il tentativo di allegare il file, riprova"),e=this.state.hasUploadFailure;a=b("React").createElement("div",{className:"_r1a UFIPhotoAttachLinkWrapper _m"+(this.props.attachment?" _5t1p":""),"data-hover":e?null:"tooltip","data-tooltip-alignh":e?null:"center","data-tooltip-content":e?null:c,onClick:this.$6,ref:"inputContainer",role:"presentation"},b("React").createElement("span",{className:a?"UFICommentFileIcon":"UFICommentPhotoIcon",ref:"inputControl"},b("React").createElement("input",{accept:a?b("UFICommentFileInputAcceptValues").files:this.props.allowVideoAttachments?b("UFICommentFileInputAcceptValues").both:b("UFICommentFileInputAcceptValues").photos,"aria-label":c,className:"_n",name:"file",ref:"input",title:c,type:"file",key:"0"})));return b("React").createElement(b("XUIError.react"),{xuiError:e?d:null,xuiErrorPosition:"above",xuiErrorAlignh:"center"},a)};return c}(b("React").Component);c.propTypes={getPhotoUploadData:a.func.isRequired,getFileUploadData:a.func,prepareForAttachedPhotoPreview:a.func.isRequired,prepareForAttachedVideoPreview:a.func,prepareForAttachedFilePreview:a.func,onPhotoUploadComplete:a.func.isRequired,onVideoUploadComplete:a.func,onVideoUploadUpdate:a.func,onVideoEncodeUpdate:a.func,onFileUploadComplete:a.func,onClick:a.func,setFileInput:a.func.isRequired,targetId:a.string,allowVideoAttachments:a.bool,allowFileAttachments:a.bool,attachment:a.object,viewerActorID:a.string.isRequired};e.exports=c}),null);
__d("UFIAddComment.react",["cx","fbt","invariant","AccessibilityConfig","ActorURI","Arbiter","AsyncRequest","Badge.react","BootloadedComponent.react","Bootloader","ClipboardPhotoUploader","CommentPrivacyValue","ConstituentBadgeEventEmitter","CurrentUser","DOMScroll","EmojiInputButton.react","Event","FeedbackSourceType","JSResource","Keys","Link.react","LitestandStoryInsertionStatus","MentionsInputUtils","MercuryIDs","PrivateCommentsConfig","PrivateConversationsTreatment","React","ReactDOM","Run","SearchableEntry","SubscriptionsHandler","SutroStoryHeaderUFIGatingConfig","TextWithEntities.react","TrackingNodes","UFIActorIconContainer.react","UFIAddCommentAction","UFIAttachMediaSection.react","UFIBotsButton","UFICommercialBreakStore","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIComposerIsTypingStore","UFIConfig","UFIGifButton.react","UFIGroupedInputTabs","UFIImageBlock.react","UFIInsightsSharingCommentTag.react","UFIMarkdownButton.react","UFINavigationCheck","UFIODSLogger","UFIPlayLiveVODHighlightsStore","UFISharedDispatcher","UFIStickerButton.react","UFIThreadedFacecastCommentsStore","UFIVersion","UFIVideoEncodeStatusMonitor","WebFunnelLogger","WritingAssistanceTypedLogger","XBasicFBNuxDismissController","XBasicFBNuxGenShouldShowController","XBasicFBNuxViewController","XConstituentBadgeV2OptInDialogController","XFeedNUXSaveSeenStateController","XUFICommentGIFPreprocessController","XUFICommentMarkdownPreviewController","XUISpinner.react","XUIText.react","getActiveElement","gkx","ifRequired","immutable","joinClasses","lazyLoadComponent","promiseDone","requireCond","requireWeak","textProbablyWritingMarkdown","throttle","uuid","cr:682211","cr:719006"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("UFIBotsButton").module,k=b("UFIGroupedInputTabs").InputTitleEnum,l=b("UFIGroupedInputTabs").setLastUsedTab,m={startFunnel:function(a){return void 0},logViewerInteracted:function(a){return void 0},logToggle:function(a,b){return void 0}};b("requireWeak")("PrivateCommentsLogger",function(a){m=a});var n=a.URL||a.webkitURL||{};c=b("React").PropTypes;var o=h._("Scrivi un commento..."),p=h._("Scrivi una risposta..."),q="fcg fss UFICommentTip",r=h._("Scrivi qualcosa..."),s=19,t="/ajax/ufi/upload/",u="/ajax/ufi/sticker_preview/",v=1e3,w="comment_content_change",x=Object.freeze({UPLOAD:"uploading",ENCODE:"encoding"}),y=5572,z=/@\[([0-9;]+):((?:[^\\\]]|\\.)*)\]/g,A=b("lazyLoadComponent")(b("JSResource")("UFICommentPivotBlock.react").__setRef("UFIAddComment.react")),B=b("lazyLoadComponent")(b("JSResource")("UFICommentPivotFailedDialog.react").__setRef("UFIAddComment.react")),C=b("lazyLoadComponent")(b("JSResource")("UFIAddMentionsButton.react").__setRef("UFIAddComment.react")),D=!1,E=!1,F=!1;d=function(c){__p&&__p();babelHelpers.inheritsLoose(d,c);d.renderEditCommentBox=function(a,c,e){__p&&__p();a=babelHelpers["extends"]({},a);delete a.addcommentautoflip;delete a.collapseaddcomment;delete a.hideActorPhoto;delete a.issnowlift;delete a.loggedOutLinkConfig;delete a.monitorHeight;delete a.sht;delete a.viewoptionstypeobjects;delete a.viewoptionstypeobjectsorder;return b("React").createElement(d,{key:"editing_comment"+c.id,viewerActorID:e.actorforpost,targetID:e.ownerid,groupID:e.grouporeventid,mentionsDataSource:e.mentionsdatasource,contextArgs:a,isEditing:!0,editingComment:c,allowVideoAttachments:e.allowvideoattachments,allowPhotoAttachments:e.allowphotoattachments,allowFileAttachments:e.allowfileattachments,allowStickerAttachments:e.allowstickerattachments,allowGifAttachments:e.allowgifattachments,allowBotMentions:e.allowbotmentions,allowTogglePrivateComments:!1,privateCommentTarget:e.actorname,allowCommentMarkdown:e.iscommentmarkdowneligible,showconstituentbadgev2optin:e.showconstituentbadgev2optin,constituentBanner:e.constituentbanneruri})};function d(d){__p&&__p();var e;e=c.call(this,d)||this;e.$4=!1;e.$19=function(a){e.props.isEditing&&b("Event").getKeyCode(a.nativeEvent)===b("Keys").ESC&&e.context.dispatch(b("UFIAddCommentAction").cancel(e.props.contextArgs));e.$1&&!e.$5&&(b("Run").onBeforeUnload(e.$20),e.$5=!0);var c=b("getActiveElement")();c&&b("Event").getKeyCode(a.nativeEvent)===b("Keys").ESC&&c.blur()};e.$21=function(a){e.$2&&!e.$4&&(new(b("WebFunnelLogger"))("GUFIComposerWebFunnelDefinition").setSessionKey(e.$2).setAction("first_input").log(),e.$4=!0),b("UFISharedDispatcher").dispatch(b("UFIAddCommentAction").changeContent(e.props.contextArgs,a,e.$22())),b("Arbiter").inform(w,{fbid:e.$22(),text:a,instanceid:e.props.contextArgs.instanceid,ftentidentifier:e.props.contextArgs.ftentidentifier}),e.props.allowCommentMarkdown&&e.state.commentMarkdownEnabled&&e.$23(a),e.props.allowCommentFixSuggestions&&(e.$24(a),e.state.commentSuggestionsShowing&&!e.state.hasStaleSuggestions&&e.setState({hasStaleSuggestions:!0})),e.props.contextArgs.messengerCommentPivotsParams&&e.props.contextArgs.messengerCommentPivotsParams.enabled&&e.$25(a),e.state.groupedInputNUXShown&&e.$26()};e.$23=function(a){a=b("XUFICommentMarkdownPreviewController").getURIBuilder().setString("comment_body",a).getURI();new(b("AsyncRequest"))(a).setHandler(e.$30).send()};e.$30=function(a){if(!a)return;e.setState({commentMarkdownPreviewContent:a.payload?a.payload.markup:null})};e.$20=function(){if(a.PageTransitions&&!b("UFINavigationCheck").isLeaving(a.PageTransitions))return;if(e.refs&&e.refs.mentionsinput&&e.refs.mentionsinput.hasEnteredText())return h._("Il commento \u00e8 incompleto. Desideri uscire senza completarlo?")};e.$32=function(){e.setState({markdownNUXVisible:!1,gifsInCommentsNUXVisible:!1,groupedInputNUXShown:!1,privateCommentNUXVisible:!1});window.setTimeout(function(){e.$1&&e.setState({isFocused:!1})},100);if(e.refs.mentionsinput&&e.refs.mentionsinput.hasEnteredText())return;e.setState({isCommenting:!1})};e.$33=function(a){var c=new(b("ClipboardPhotoUploader"))(t,e.$34());e.$35();e.$6=[c.subscribe("upload_start",e.$36),c.subscribe("upload_error",e.$37),c.subscribe("upload_success",function(a,b){e.$38(b)})];c.handlePaste(a)};e.$42=function(a,b){var c=e.props.isEditing||e.state.hasAttachment,d=a.encodedValue&&a.encodedValue.trim(),f=e.state.isLoadingPhoto||e.$43()||e.state.isLoadingFile;if(f||!c&&!d)return!1;else if(!c&&e.state.showMessengerPivot&&e.state.shouldSendAsMessage){f=a.encodedValue=a.encodedValue?a.encodedValue.trim():"";return e.$44(f)}else return e.$45(a,b)};e.$49=function(){e.$39()};e.focus=function(){__p&&__p();e.$39();var a={isCommenting:!0,isFocused:!0},c=e.props.contextArgs.loggedOutLinkConfig;c&&c.showAddComment&&b("Bootloader").loadModules(["AsyncDialog"],function(a){a.bootstrap(c.addCommentAjaxifyURI,null,"dialog")},"UFIAddComment.react");e.refs.groupedInputButton&&b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(a,b){a.hasUserSeenMessage(b.MERGE_INPUT_COMPOSER_NUX)||(e.setState({groupedInputNUXShown:!0}),a.markMessageSeenByUser(b.MERGE_INPUT_COMPOSER_NUX))},"UFIAddComment.react");if(e.props.allowGifAttachments&&b("UFIConfig").shouldShowGIFsInCommentsNux&&!D){D=!0;var d=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","gif_comments").setBool("seen",!0).getURI();new(b("AsyncRequest"))(d).send();a.gifsInCommentsNUXVisible=!0}if(e.props.allowCommentMarkdown&&b("UFIConfig").shouldShowMarkdownCommentNUX&&!b("UFIConfig").shouldShowGIFsInCommentsNux&&!E){E=!0;d=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","markdown_comments").setBool("seen",!0).getURI();new(b("AsyncRequest"))(d).send();a.markdownNUXVisible=!0}if(e.props.allowTogglePrivateComments&&!(e.state.gifsInCommentsNUXVisible||a.gifsInCommentsNUXVisible)&&!(e.state.markdownNUXVisible||a.markdownNUXVisible)&&!F){F=!0;d=b("XBasicFBNuxGenShouldShowController").getURIBuilder().setInt("nux_id",y).getURI();new(b("AsyncRequest"))().setURI(d).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();if(a&&a.should_show_nux){a=b("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",y).getURI();new(b("AsyncRequest"))().setURI(a).send();e.setState({privateCommentNUXVisible:!0})}}).send()}if(e.state.showConstituentBadgeV2OptIn){d=b("XConstituentBadgeV2OptInDialogController").getURIBuilder().setString("ft_id",e.props.commentsTargetID).getURI();new(b("AsyncRequest"))().setURI(d).send()}e.setState(a);e.markViewerHasInteracted();e.props.onFocus&&e.props.onFocus();b("Arbiter").inform("UFIAddComment/focus",{instanceid:e.props.contextArgs.instanceid,ftentidentifier:e.props.contextArgs.ftentidentifier,isTopLevelComposer:e.props.isTopLevelComposer})};e.$59=function(a,b){e.setState({fileInput:a,fileUploader:b})};e.handleMessengerPivotClick=function(){e.setState(function(a){e.$28(a.shouldSendAsMessage?"pivot disabled":"pivot enabled");return{shouldSendAsMessage:!a.shouldSendAsMessage}}),e.refs.mentionsinput.focus()};e.$60=function(a){l(k.EMOJI),e.refs.mentionsinput.insertEmoji(a)};e.$63=function(a,b){l(k.STICKER),e.onStickerSelected(a,b),e.$64(!1)};e.$61=function(a){l(k.GIF),e.onGifSelected(a),e.$64(!1)};e.$64=function(a){a!==e.state.flyoutShown&&e.setState({flyoutShown:a})};e.$65=function(){e.state.customStickerNUXShown&&e.$51()};e.$62=function(){e.state.flyoutShown||e.markViewerHasInteracted(),e.state.groupedInputNUXShown&&e.$26(),e.state.customStickerNUXShown&&e.$51()};e.$34=function(){var a=e.props.viewerActorID,c={profile_id:a,target_id:e.props.targetID,source:s};c[b("ActorURI").PARAMETER_ACTOR]=a;return c};e.$38=function(a){if(!e.state.isLoadingPhoto)return;a=a.getPayload();a&&a.fbid?e.setState({attachedPhoto:a,isLoadingPhoto:!1}):e.$37(null)};e.$66=function(){var a=e.props.viewerActorID,c={profile_id:a,target_id:e.props.targetID};c[b("ActorURI").PARAMETER_ACTOR]=a;return c};e.$69=function(a){if(!e.state.isLoadingFile)return;a=a.getPayload();a&&a.fbid?e.setState({attachedFile:a,isLoadingFile:!1}):e.$37(null)};e.$71=function(a,b){if(!e.state.attachedVideo||e.state.videoStatus!==x.ENCODE)return;if(b.obj.progress<e.state.videoProgress)return;b.obj.fbid=b.obj.videoID;if(e.state.attachedVideo.fbid&&e.state.attachedVideo.fbid!==b.obj.fbid)return;e.setState({attachedVideo:b.obj,videoProgress:b.obj.progress,videoStatus:x.ENCODE});e.$83(b.obj.stage)&&e.$84()};e.$72=function(a){e.setState({videoProgress:a})};e.$70=function(a){if(e.state.videoStatus!==x.UPLOAD)return;a&&a.video_id&&(e.setState({videoProgress:0,attachedVideo:a,videoStatus:x.ENCODE}),b("gkx")("835509")&&e.$7.addSubscriptions(new(b("UFIVideoEncodeStatusMonitor"))(a.video_id).subscribe(function(){e.setState({videoProgress:100})})))};e.$37=function(a){b("Arbiter").inform("video_upload_cancel",{}),e.state.fileInput&&e.state.fileInput.clear(),e.setState({attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedGIF:null,attachedStars:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:!1,videoProgress:0,isVideoFileTranscodedGIF:!1,hasAttachment:!1})};e.$36=function(){e.setState({attachedPhoto:null,isLoadingPhoto:!0})};e.$68=function(){e.setState({attachedFile:null,isLoadingFile:!0})};e.$67=function(){var a,b=e.state.fileInput?e.state.fileInput.input:null;b=b?b.files[0]:null;b&&n.createObjectURL&&(a=n.createObjectURL(b));e.setState({attachedVideo:null,videoStatus:x.UPLOAD,videoFileURL:a,videoProgress:0,isVideoFileTranscodedGIF:Boolean(b&&b.type==="image/gif")})};e.$85=function(a){if(!e.state.isLoadingPhoto)return;a=a.getPayload();a&&a.fbid?e.$82({attachedSticker:a,isLoadingPhoto:!1}):(b("Bootloader").loadModules(["Dialog"],function(a){var b=h._("Impossibile allegare l'adesivo"),c=h._("Si \u00e8 verificato un problema nell'allegare l'adesivo.");new a().setTitle(b).setBody(c).setButtons(a.OK).show()},"UFIAddComment.react"),e.$74(null))};e.$74=function(a){e.setState({attachedSticker:null,isLoadingPhoto:!1,hasAttachment:!1})};e.$73=function(a){b("Bootloader").loadModules(["FunnelLogger"],function(a){a.appendAction("FLEXIBLE_STARS_WWW_FUNNEL","dismissed_star_attachment"),a.endFunnel("FLEXIBLE_STARS_WWW_FUNNEL")},"UFIAddComment.react"),e.$37(a)};e.onStickerSelected=function(a,b){if(e.props.isEditing||e.refs.mentionsinput.hasEnteredText()){e.$81(a);return}e.sendSticker(a,b)};e.onStarsSelected=function(a){var b=e.getMatchingStarTippedValue(a.quantity,a.promotionEvent),c=a.quantity;e.setState({attachedStars:{previewImageSrc:a.previewImageSrc,metadata:c+b,userTippedQuantity:c,matchingQuantity:b,promotionEvent:e.isPromotionMatchingEnabled(a.promotionEvent)?a.promotionEvent:null,type:"SEND_STARS"}})};e.$51=function(){e.setState({customStickerNUXShown:!1})};e.$54=function(){e.setState({markdownNUXVisible:!1})};e.$26=function(){e.setState({groupedInputNUXShown:!1})};e.$58=function(){var a=b("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",y).getURI();new(b("AsyncRequest"))().setURI(a).send();e.setState({privateCommentNUXVisible:!1})};e.onGifSelected=function(a){if(e.props.isEditing||e.refs.mentionsinput.hasEnteredText()){e.$82({attachedGIF:a});e.preprocessGIF(a);return}e.sendGIF(a)};e.$75=function(a,b){e.setState(function(c){c[a]=b;return{mentionsData:c}},function(){e.props.contextArgs.messengerCommentPivotsParams&&e.props.contextArgs.messengerCommentPivotsParams.enabled&&e.$27()})};e.$1=!1;var f=e.props.editingComment,g=f.attachment,i=g?g.type:null,j=i==="photo"?g:null;e.state={attachedPhoto:f.photo_comment||j,attachedVideo:f.video_comment||null,attachedFile:f.file_comment||null,attachedSticker:i=="sticker"?g:null,attachedGIF:i=="gif"?g:null,attachedStars:i=="SEND_STARS"?g:null,commentMarkdownPreviewContent:f.body?f.body.markup||null:null,commentMarkdownEnabled:f.body?f.body.markdown_enabled||!1:!1,currentThreadedFacecastCommentID:b("UFIThreadedFacecastCommentsStore").getCommentID(d.contextArgs.instanceid),addCommentNUXShown:e.props.contextArgs.permalinkAddCommentNuxShown||!1,commentPrivacy:f.privacy_value||e.props.replyCommentPrivacy||b("CommentPrivacyValue").DEFAULT_PRIVACY,showConstituentBadgeV2OptIn:Boolean(e.props.showConstituentBadgeV2OptIn),constituentBannerState:String(e.props.constituentBanner),customStickerNUXShown:!1,commentSuggestionsShowing:!1,videoStatus:null,videoFileURL:null,videoProgress:0,isVideoFileTranscodedGIF:!1,fileInput:null,fileUploader:null,flyoutShown:!1,isCommenting:!1,isLoadingPhoto:!1,isLoadingFile:!1,isFocused:Boolean(e.props.isEditing),gifsInCommentsNUXVisible:!1,groupedInputNUXShown:!1,markdownNUXVisible:!1,privateCommentNUXVisible:!1,hasPotentialSuggestions:!1,hasStaleSuggestions:!1,isInitialSuggestionCheck:!0,inCommercialBreak:!1,isPlayingLiveVODHighlights:!1,showFailedMessageDialog:!1,showMessengerPivot:!1,shouldSendAsMessage:!1,isSendingMessage:!1,hasAttachment:!1,mentionsData:{},currentMentionIds:[],currentMentionOffsets:[],videoTrimParams:null,selectedInsightPoint:null};j=e.state.attachedPhoto||e.state.attachedVideo||e.state.attachedFile||e.state.attachedGIF||e.state.attachedSticker||e.state.attachedStars;e.state.hasAttachment=!!j;b("Run").onLoad(function(){b("Bootloader").loadModules(["UFIAddCommentLiveTypingController"],function(){},"UFIAddComment.react")});return e}var f=d.prototype;f.$25=function(a){var b=this;this.setState(function(){var c=b.parseTextForMentions(a).map(function(a){return a.uid}),d=b.parseTextForMentions(a).map(function(a){return a.offset});return{currentMentionIds:c,currentMentionOffsets:d}},function(){b.$27()})};f.$27=function(){__p&&__p();var a=this;if(this.props.contextArgs.shareLinkConfig&&!this.$22()&&!this.props.isEditing){var b=this.state.currentMentionIds.length>=1,c=this.state.currentMentionOffsets.findIndex(function(a){return a===0})!==-1;if((!b||!c)&&this.state.showMessengerPivot)this.$28("pivot hidden"),this.setState({showMessengerPivot:!1});else if(b&&c){var d=!0;b=!1;c=this.state.currentMentionIds.length;for(var e=0;e<c;e++){var f=this.state.currentMentionIds[e];if(!this.state.mentionsData[f]){b=!0;break}else if(this.state.mentionsData[f]!=="user"){d=!1;break}}b||this.setState(function(b){if(d!==b.showMessengerPivot){a.$29();a.$28(b.showMessengerPivot?"pivot hidden":"pivot shown");return{showMessengerPivot:!b.showMessengerPivot}}return{}})}}};f.$31=function(a){__p&&__p();if(!this.$17||this.$17.length===a.length)return!1;var b,c;this.$17.length>a.length?(b=this.$17,c=a):(b=a,c=this.$17);a=null;var d=0;while(a===null&&d<c.length)c[d]!==b[d]&&(a=b[d]),d++;if(a===null)a=b[b.length-1];else{c=b[d];if(!/[a-zA-Z\-\']/.test(c))return!1}return!/[a-zA-Z\-\']/.test(a)};f.$24=function(a){__p&&__p();if(!this.$31(a)){this.$17=a;return}this.$17=a;var c=a.match(/[a-zA-z\-\']+/g);if(!c)return;var d=b("AccessibilityConfig").svTypicalDyslexiaMisspellings,e=!1;a=a.toUpperCase()===a;for(var c=c,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;if(a||h.toUpperCase()!==h){h=h.toLowerCase();d.includes(h)&&(e=!0)}}if(this.state.hasPotentialSuggestions===e)return;this.setState({hasPotentialSuggestions:e});e&&new(b("WritingAssistanceTypedLogger"))().setAction("badge_shown").setValue("true").log()};f.$39=function(){this.$2||(this.$2=this.props.viewerActorID+"_"+Date.now(),new(b("WebFunnelLogger"))("GUFIComposerWebFunnelDefinition").setSessionKey(this.$2).setAction("focus").setFunnelTags(["depth_"+(this.$22()?"1":"0")]).markStart().log())};f.$40=function(){this.$2&&(new(b("WebFunnelLogger"))("GUFIComposerWebFunnelDefinition").setSessionKey(this.$2).setAction("commit").markEnd().log(),delete this.$2,this.$4=!1)};f.$29=function(){this.$3||(this.$3=""+Date.now(),new(b("WebFunnelLogger"))("UFIMessengerPivotsWebFunnelDefinition").setSessionKey(this.$3).setAction("Start").markStart().log())};f.$41=function(){this.$3&&(new(b("WebFunnelLogger"))("UFIMessengerPivotsWebFunnelDefinition").setSessionKey(this.$3).setAction("Commit").markEnd().log(),this.$3=null)};f.$28=function(a){this.$3&&new(b("WebFunnelLogger"))("UFIMessengerPivotsWebFunnelDefinition").setSessionKey(this.$3).setAction(a).log()};f.$45=function(a,c){__p&&__p();this.setState({showMessengerPivot:!1});this.$28("comment posted");this.$41();a.encodedValue=a.encodedValue?a.encodedValue.trim():"";this.state.commentMarkdownEnabled?(a.isMarkdown=!0,this.setState({commentMarkdownEnabled:!1,commentMarkdownPreviewContent:null})):this.props.allowCommentMarkdown&&!a.isMarkdown&&(a.isMarkdown=b("textProbablyWritingMarkdown")(a.encodedValue));this.state.commentPrivacy&&(a.privacy_value=this.state.commentPrivacy);this.state.selectedInsightPoint&&(a.selectedInsightPoint=this.state.selectedInsightPoint);this.state.hasAttachment?(a.attachedPhoto=this.state.attachedPhoto,a.attachedVideo=this.state.attachedVideo,a.attachedFile=this.state.attachedFile,a.attachedSticker=this.state.attachedSticker,a.attachedStars=this.state.attachedStars,this.state.attachedGIF&&(this.state.attachedGIF.source?a.attachedShareURL=this.state.attachedGIF.source.url:this.state.attachedGIF.originalImageUrl&&(a.attachedShareURL=this.state.attachedGIF.originalImageUrl)),this.setState({isLoadingPhoto:!1,isLoadingFile:!1,attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedSticker:null,attachedGIF:null,attachedStars:null,hasAttachment:!1})):(a.attachedPhoto=null,a.attachedVideo=null,a.attachedFile=null,a.attachedSticker=null,a.attachedGIF=null,a.attachedShareURL=null,a.attachedStars=null);if(this.props.isEditing)this.context.dispatch(b("UFIAddCommentAction").submitEdit(this.props.contextArgs,this.props.editingComment,a,c.target));else if(this.state.attachedStars)this.$46(a);else{var d=b("UFICommonInteractionLogger").makeTrackingID();b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_OPTIMISTIC_COMMENT,d+b("UFICommonInteractionEvents").UFI_OPTIMISTIC_COMMENT);b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_PERSISTED_COMMENT,d+b("UFICommonInteractionEvents").UFI_PERSISTED_COMMENT);a.trackingID=d;this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,a,c.target,this.$22()))}this.$40();this.$47();return!0};f.$46=function(a){var c=this,d,e=(d=this.state.attachedStars)==null?void 0:d.userTippedQuantity,f=this.props.targetID,g=(d=this.state.attachedStars)==null?void 0:d.matchingQuantity,h=(d=this.state.attachedStars)==null?void 0:(d=d.promotionEvent)==null?void 0:d.id;e&&f&&b("Bootloader").loadModules(["VideoStarsSpendMutationWebGraphQLMutation","WebGraphQL","FunnelLogger"],function(d,i,j){b("promiseDone")(i.exec(new d({input:{actor_id:c.props.viewerActorID,client_mutation_id:b("uuid")(),comment:a.encodedValue,payee_id:f,platform:"FB",spending_units:e,matching_units:g,video_id:c.props.commentsTargetID,wallet_promotion_id:h,wallet_type:"FB_STARS"}})),null,function(a){c.setState({isSendingMessage:!1,showFailedMessageDialog:!0})}),j.appendActionWithTag("FLEXIBLE_STARS_WWW_FUNNEL","sent_stars",e),j.endFunnel("FLEXIBLE_STARS_WWW_FUNNEL")},"UFIAddComment.react")};f.$44=function(a){__p&&__p();var c=this;this.$40();this.$28("begin message send");this.setState({isSendingMessage:!0});var d=b("Bootloader").loadModules(["FantaTabActions","MercurySourceType","XMessengerPivotsController","UFICommentPivotFailedDialog.react"],function(e,f,g,d){__p&&__p();f=g.getURIBuilder().setString("comment_body",a).setFBID("ft_ent_identifier",c.props.contextArgs.ftentidentifier).getURI();new(b("AsyncRequest"))(f).setHandler(function(d){var f=[{startIndex:0,changeCount:a.length,changeValue:""}];c.refs.mentionsinput.replaceText("",f);c.setState({showMessengerPivot:!1,isSendingMessage:!1});f=d.payload;f.id&&(f.isGroup?e.openTab(b("MercuryIDs").getThreadIDFromThreadFBID(f.id.toString())):e.openTab(b("MercuryIDs").getThreadIDFromUserID(f.id.toString())));c.$28("send succeeded");c.$41()}).setErrorHandler(function(a){c.setState({isSendingMessage:!1,showFailedMessageDialog:!0}),c.$28("send failed")}).send()},"UFIAddComment.react");this.$7.addSubscriptions(d);this.refs.mentionsinput.focus();return!1};f.$43=function(){return this.state.videoStatus===x.UPLOAD||this.state.videoStatus===x.ENCODE&&this.state.videoProgress!==100};f.$35=function(){this.$6&&this.$6.forEach(function(a){a.unsubscribe()})};f.UNSAFE_componentWillMount=function(){__p&&__p();var a=this;this.$5=!1;this.$9=b("LitestandStoryInsertionStatus").registerBlocker(function(){return a.state.isCommenting});this.$7&&this.$7.release();this.$7=new(b("SubscriptionsHandler"))();this.$7.addSubscriptions(b("UFICommercialBreakStore").addListener(function(){a.setState({inCommercialBreak:b("UFICommercialBreakStore").getValueFor(a.props.contextArgs.instanceid)})}),b("UFIPlayLiveVODHighlightsStore").addListener(function(){a.setState({isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(a.props.contextArgs.instanceid)})}),b("ConstituentBadgeEventEmitter").addListener("ConstituentBadgeV2OptInModal",function(b){if(!b){a.setState({showConstituentBadgeV2OptIn:!1});return}a.setState({constituentBannerState:b.turn_off?null:a.props.constituentBanner,showConstituentBadgeV2OptIn:!1})}));this.props.allowLiveVideoCommentReplyMode&&(this.props.contextArgs.islivestreaming||this.props.contextArgs.isLiveVOD)&&this.$7.addSubscriptions(b("UFIThreadedFacecastCommentsStore").addListener(function(){var c=a.state.currentThreadedFacecastCommentID,d=b("UFIThreadedFacecastCommentsStore").getCommentID(a.props.contextArgs.instanceid);a.setState({currentThreadedFacecastCommentID:d});d!==c&&a.focus()}));this.$8=null;b("UFIConfig").canPublishLive&&this.$7.addSubscriptions(b("UFIComposerIsTypingStore").addListener(function(){var c=b("UFIComposerIsTypingStore").getValueFor(a.props.contextArgs.ftentidentifier);if(c===null)return;b("Bootloader").loadModules(["UFIAddCommentLiveTypingController"],function(b){a.$8||(a.$8=new b(a.props.contextArgs.ftentidentifier,a.$22(),a.props.viewerActorID)),c?a.$8.attemptPublishStartEvent():a.$8.attemptPublishStopEvent()},"UFIAddComment.react")}));this.props.allowTogglePrivateComments&&(b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled)&&this.$7.addSubscriptions(b("UFIComposerIsTypingStore").addListener(function(){var c=a.props.contextArgs.ftentidentifier;b("UFIComposerIsTypingStore").getValueFor(c)&&m.logViewerInteracted(c)}))};f.$48=function(){this.$8&&this.$8.destroy(),this.$8=null};f.UNSAFE_componentWillReceiveProps=function(a){var b=this.props.contextArgs.ftentidentifier,c=a.contextArgs.ftentidentifier;(c!==b||this.props.replyCommentID!==a.replyCommentID||this.props.viewerActorID!==a.viewerActorID)&&this.$48()};f.componentWillUnmount=function(){__p&&__p();var a=this;b("Bootloader").loadModules(["TextDelightInComposerLogger"],function(b){b.endFunnel(a.$22()||a.props.contextArgs.ftentidentifier)},"UFIAddComment.react");this.$1=!1;this.$35();this.$11&&b("Arbiter").unsubscribe(this.$11);this.$10&&b("Arbiter").unsubscribe(this.$10);this.$12&&b("Arbiter").unsubscribe(this.$12);this.$13&&b("Arbiter").unsubscribe(this.$13);this.$14&&b("Arbiter").unsubscribe(this.$14);this.$15&&b("Arbiter").unsubscribe(this.$15);this.$9&&this.$9.unsubscribe();this.$9=null;this.$7&&this.$7.release();this.$48()};f.$50=function(){var a=this;if(!this.state.customStickerNUXShown)this.props.allowCustomStickerAttachments&&(this.refs.groupedInputButton||this.refs.sticker_button)&&b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(b,c){b.hasUserSeenMessage(c.GAMES_STREAM_CUSTOM_STICKER)||(a.setState({customStickerNUXShown:!0}),b.markMessageSeenByUser(c.GAMES_STREAM_CUSTOM_STICKER))},"UFIAddComment.react");else{var c=this.refs.sticker_button?this.refs.sticker_button:this.refs.groupedInputButton;return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return c},shown:this.state.customStickerNUXShown,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$51},h._("New! Send a custom sticker"))}return null};f.$52=function(){var a=this;return this.state.gifsInCommentsNUXVisible&&this.refs.gif_button?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return a.refs.gif_button},shown:this.state.gifsInCommentsNUXVisible,position:"above",width:"auto",alignment:"right"},h._("Ora puoi aggiungere GIF ai commenti")):null};f.$53=function(){var a=this;return this.state.markdownNUXVisible?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return a.refs.markdownButton},shown:this.state.markdownNUXVisible,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$54},h._("[FB-Only] Markdown in Comments! Click to enable.")):null};f.$55=function(){var a=this;return this.state.groupedInputNUXShown?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return a.refs.groupedInputButton},shown:this.state.groupedInputNUXShown,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$26},h._("Pubblica adesivi, emoji e GIF")):null};f.$56=function(){var a=this;return this.state.addCommentNUXShown?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FBAmbientPulseNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return a.refs.mentionsinput},dialogShown:!1,position:"left",shown:this.state.addCommentNUXShown}):null};f.$57=function(){var a=this;return this.state.privateCommentNUXVisible?b("React").createElement(b("BootloadedComponent.react"),{alignment:"right",bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return a.refs.privacy_icon},onCloseButtonClick:this.$58,position:"above",shown:this.state.privateCommentNUXVisible,width:"auto"},b("React").createElement(b("XUIText.react"),{display:"block",weight:"bold"},h._("Commenta privatamente")),b("React").createElement(b("XUIText.react"),{display:"block"},h._("Aggiungi un commento visibile solo a {user}",[h._param("user",this.props.privateCommentTarget)]))):null};f.render=function(){__p&&__p();var a=this,c=this.props.contextArgs.loggedOutLinkConfig,d=!0;c&&c.showAddComment&&(d=!1);c=(!this.props.contextArgs.collapseaddcomment||this.state.isCommenting)&&d&&!this.props.contextArgs.hideActorPhoto;var f=null;this.props.subtitle?f=b("React").createElement("span",{className:q},this.props.subtitle):!this.state.isFocused&&this.props.isEditing?f=b("React").createElement("span",{className:q},h._("{cancel}",[h._param("cancel",b("React").createElement(b("Link.react"),{onClick:function(){return a.context.dispatch(b("UFIAddCommentAction").cancel(a.props.contextArgs))}},h._("Annulla")))])):this.props.isEditing?f=b("React").createElement("span",{className:q},h._("Premi Esc per {cancel}",[h._param("cancel",b("React").createElement(b("Link.react"),{onMouseDown:function(){return a.context.dispatch(b("UFIAddCommentAction").cancel(a.props.contextArgs))}},h._("annullare")))])):this.props.peopleOutsideCommunityInCommentNotice&&this.state.isFocused?f=b("React").createElement("div",{className:"fcg fsm _2pid"},b("React").createElement(b("Badge.react"),{key:"noncoworker",type:"work_non_coworker"}),b("React").createElement("span",{className:"_2pir _4zk5"},b("React").createElement(b("TextWithEntities.react"),{ranges:this.props.peopleOutsideCommunityInCommentNotice.ranges,text:this.props.peopleOutsideCommunityInCommentNotice.text}))):this.props.showSendOnEnterTip&&!this.props.contextArgs.isTahoeUFI&&!this.props.contextArgs.isActiveLivingRoom&&(f=b("React").createElement("span",{className:q},h._("Premi Invio per pubblicare.")));var g=null,i=null,k=null,l=null,m=null,n=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo||this.state.attachedFile||this.state.attachedGIF||this.state.attachedStars,s=null,t=null,u=null,v=null,w=null,y=b("cr:682211")?b("React").createElement(b("cr:682211"),{ref:"groupedInputButton",allowCustomStickers:!!this.props.allowCustomStickerAttachments,allowGifAttachments:!!this.props.allowGifAttachments,allowStickerAttachments:!!this.props.allowStickerAttachments,customStickerOwnerID:this.props.targetID,flyoutShown:this.state.flyoutShown,onEmojiSelect:this.$60,onGifSelect:this.$61,onLinkClick:this.$62,onStickerSelect:this.$63,toggleFlyout:this.$64}):null,z=b("cr:682211")?null:b("React").createElement(b("EmojiInputButton.react"),{buttonClassName:"_r1a UFICommentEmojiButton",iconActiveClassName:"UFICommentEmojiIconActive",iconClassName:"UFICommentEmojiIcon",onClick:function(){return a.markViewerHasInteracted()},onSelect:function(b){a.refs.mentionsinput.insertEmoji(b)}});this.props.allowCommentMarkdown&&(l=b("React").createElement(b("UFIMarkdownButton.react"),{active:this.state.commentMarkdownEnabled,ref:"markdownButton",onClick:function(){var b=!a.state.commentMarkdownEnabled;a.setState({commentMarkdownEnabled:b});a.refs.mentionsinput&&b&&a.$23(a.refs.mentionsinput.getText())}}));!b("cr:682211")&&this.props.allowStickerAttachments&&!n&&(i=b("React").createElement(b("UFIStickerButton.react"),{ref:"sticker_button",allowCustomStickers:this.props.allowCustomStickerAttachments,allowCustomStickersV2:this.props.allowCustomStickerAttachmentsV2,customStickerOwnerID:this.props.targetID,onStickerSelected:this.onStickerSelected,onLinkClick:this.$65,onStickerFlyoutShow:function(){b("Arbiter").inform("comment_content_change",{addingAttachment:!0}),a.markViewerHasInteracted()}}));!b("cr:682211")&&this.props.allowGifAttachments&&!n&&(k=b("React").createElement(b("UFIGifButton.react"),{ref:"gif_button",onGifSelected:this.onGifSelected,onGifFlyoutShow:function(){return a.markViewerHasInteracted()},defaultGifSelection:this.props.contextArgs.defaultGifQuery}));this.props.showAddMentionButton&&(m=b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("span",null)},b("React").createElement(C,{ftentidentifier:this.props.contextArgs.ftentidentifier,onMentionClicked:function(b){return a.insertMention(b)},onMentionFlyoutShow:function(){return a.markViewerHasInteracted()}})));var B=this.props.viewerActorID!==b("CurrentUser").getAccountID();if(this.props.allowNativeTipJar&&this.props.tipJarModule&&!this.props.allowFlexibleTipping&&!B){var D=this.props.tipJarModule;u=b("React").createElement(D,{showNux:!this.state.customStickerNUXShown,targetID:this.props.targetID,targetName:this.props.targetName,videoID:this.props.commentsTargetID})}if(this.props.allowFlexibleTipping&&this.props.flexibleStarsModule&&(!n||this.state.attachedStars)&&!B){D=this.props.flexibleStarsModule;v=b("React").createElement(D,{canShowNux:!this.state.customStickerNUXShown,onStarsSelected:this.onStarsSelected,targetID:this.props.targetID,targetName:this.props.targetName,videoID:this.props.commentsTargetID})}this.props.allowCommentFixSuggestions&&(w=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIFixSuggestionsButton.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),active:this.state.commentSuggestionsShowing,badged:this.state.hasPotentialSuggestions,ref:"fixSuggestionsButton",onClick:function(){var c=!a.state.commentSuggestionsShowing;a.setState({commentSuggestionsShowing:c});c&&(a.$18=a.refs.mentionsinput.getText(),a.setState({hasPotentialSuggestions:!1,hasStaleSuggestions:!1,isInitialSuggestionCheck:!0}));new(b("WritingAssistanceTypedLogger"))().setAction("icon_clicked").setValue(c?"show":"hide").log()}}));(this.props.allowPhotoAttachments||this.props.allowVideoAttachments||this.props.allowFileAttachments)&&(s=this.$33,g=b("React").createElement(b("UFIAttachMediaSection.react"),{ref:"media_section",getPhotoUploadData:this.$34,getFileUploadData:this.$66,prepareForAttachedPhotoPreview:this.$36,prepareForAttachedVideoPreview:this.$67,prepareForAttachedFilePreview:this.$68,allowVideoAttachments:this.props.allowVideoAttachments,allowFileAttachments:this.props.allowFileAttachments,onPhotoUploadComplete:this.$38,onFileUploadComplete:this.$69,onVideoUploadComplete:this.$70,onVideoEncodeUpdate:this.$71,onVideoUploadUpdate:this.$72,setFileInput:this.$59,targetId:this.props.targetID,onClick:function(){b("Arbiter").inform("comment_content_change",{addingAttachment:!0}),a.markViewerHasInteracted()},attachment:n,viewerActorID:this.props.viewerActorID}));B=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.ADD_COMMENT_BOX);D="addComment_"+this.props.contextArgs.ftentidentifier;this.$22()?n=this.props.contextArgs.replyPlaceholderText||p:this.props.contextArgs.placeholderText?n=this.props.contextArgs.placeholderText:this.props.contextArgs.isActiveLivingRoom?n=r:n=o;var E=this.props.contextArgs.viewoptionstypeobjects,F=this.props.contextArgs.viewoptionstypeobjectsorder;this.props.attachedPhoto&&!this.props.subtitle&&(f=null);var G;(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===x.UPLOAD||this.state.attachedFile||this.state.isLoadingFile||this.state.attachedSticker||this.state.attachedGIF||this.state.attachedStars)&&(G=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIAttachedMediaPreview.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedFile:this.state.attachedFile,attachedSticker:this.state.attachedSticker,attachedGIF:this.state.attachedGIF,attachedStars:this.state.attachedStars,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this.$37,onRemoveAttachedStarsPreview:this.$73,onRemoveAttachedStickerPreview:this.$74,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,isLoadingFile:this.state.isLoadingFile,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoTrimParams:this.state.videoTrimParams,videoProgress:this.state.videoProgress,isVideoFileTranscodedGIF:this.state.isVideoFileTranscodedGIF}));var H=this.props.contextArgs.mentionsinput,I=null,J=null,K=null;H&&(I=H.inputComponent,J=H.viewComponent,K=H.viewProps);H=this.props.editingComment.body;H=H?b("MentionsInputUtils").generateDataFromTextWithEntities(H):null;var L=null;this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled&&(L=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentMarkdownPreview.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),markup:this.state.commentMarkdownPreviewContent}));var M=null;this.props.allowCommentFixSuggestions&&this.state.commentSuggestionsShowing&&(M=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIFixSuggestionsDetails.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),null),hasStaleSuggestions:this.state.hasStaleSuggestions,isInitialCheck:this.state.isInitialSuggestionCheck,onAccept:function(c,d){if(c){var e=a.refs.mentionsinput;e.replaceText(c,d)}a.setState({commentSuggestionsShowing:!1});new(b("WritingAssistanceTypedLogger"))().setAction("action_clicked").setValue("accept").log()},onCancel:function(){a.setState({commentSuggestionsShowing:!1}),new(b("WritingAssistanceTypedLogger"))().setAction("action_clicked").setValue("ignore").log()},onRefresh:function(){a.$18=a.refs.mentionsinput.getText(),a.setState({hasPotentialSuggestions:!1,hasStaleSuggestions:!1,isInitialSuggestionCheck:!1}),new(b("WritingAssistanceTypedLogger"))().setAction("action_clicked").setValue("refresh").log()},userText:this.$18}));I=I?b("React").createElement(I,{disableInitTextarea:!d,replyCommentID:this.$22(),initialData:H,placeholder:n,datasource:this.props.mentionsDataSource,ref:"mentionsinput",viewComponent:J,viewProps:K,viewOptionsTypeObjects:E,viewOptionsTypeObjectsOrder:F,hashtags:this.props.contextArgs.sht,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this.$42,onDummyFocus:this.$49,onFocus:this.focus,onBlur:this.$32,onContentChange:this.$21,onPaste:s,ftEntIdentifier:this.props.contextArgs.ftentidentifier,instanceID:this.props.contextArgs.instanceid,isBroadcasterUFI:this.props.contextArgs.isBroadcasterUFI,isTahoeUFI:this.props.contextArgs.isTahoeUFI,isLivingRoom:this.props.contextArgs.isActiveLivingRoom,isStreamerHub:this.props.contextArgs.isStreamerHub,showMessengerPivot:this.state.showMessengerPivot&&!this.state.hasAttachment,updateMentionsData:this.$75}):null;d=this.state.showMessengerPivot&&!this.state.hasAttachment?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",{className:"_6fr-"})},b("React").createElement(A,{contextArgs:this.props.contextArgs,isActive:this.state.shouldSendAsMessage,isSending:this.state.isSendingMessage,onClick:this.handleMessengerPivotClick})):null;H=b("SutroStoryHeaderUFIGatingConfig").enabled_for_comment_composer_rounded_borders;n=b("SutroStoryHeaderUFIGatingConfig").enabled_for_comment_glyphs;J=j&&this.props.allowBotMentions&&this.props.groupID?b("React").createElement(j,{groupID:this.props.groupID,onSelect:function(b){return a.insertMention(b)}}):null;K=this.state.selectedInsightPoint&&b("React").createElement(b("UFIInsightsSharingCommentTag.react"),{showMiddot:!1,formattedValue:this.state.selectedInsightPoint.formattedValue});E=b("React").createElement("div",{className:"UFICommentContainer"},b("React").createElement("div",{className:"_fmi"+(H?" _613v":"")+" UFIInputContainer"+(b("PrivateCommentsConfig").dark_composer_theme_enabled&&this.state.commentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER?" UFIPrivateCommentDarkTheme":"")},K,d,I,b("React").createElement("div",{className:"_fmk"+(this.state.showMessengerPivot&&!this.state.hasAttachment?" _6fry":"")+" UFICommentAttachmentButtons _5op2"+(n?" _15i7":"")+(n?" _2kwm":"")},n?this.$76():null,w,J,m,z,l,g,k,i,y,t,u,v)),L,M,G,f);var N={};if(c){var O=this.props.contextArgs.livingRoomID;this.props.contextArgs.isLivingRoom==!0&&O!=null&&b("Bootloader").loadModules(["LivingRoomActions","LivingRoomLoggerAction","LivingRoomStoreInitializer","LivingRoomTypedLogger","UFICentralUpdates"],function(a,c,d,e,f){f.subscribe("actor-changed",function(c,e){a.clearAddVideoDialogTab(O),a.updatePresentUsers(O,b("immutable").List(),0),a.close(O),d.initialize(null,O,e.actorID)}),N.onActorChange=function(a,b){new e().setLivingRoomID(O).setLivingRoomAction(c.VOICE_SELECTOR_ACTOR_CHANGE).updateExtraData({oldActorID:a,newActorID:b}).log()}},"UFIAddComment.react");E=b("React").createElement(b("UFIImageBlock.react"),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?" UFIStickersEnabledInput":"")+(this.props.allowCommentMarkdown?" UFIMarkdownEnabledInput":"")+(this.props.allowGifAttachments?" UFIGifEnabledInput":"")+(this.props.allowNativeTipJar?" UFITipJarEnabledInput":"")+(this.props.allowFlexibleTipping?" UFIFlexibleStarsEnabledInput":"")},b("React").createElement("div",{className:"UFIReplyActorPhotoWrapper"+(this.state.showMessengerPivot&&!this.state.hasAttachment?" _6fr_":""),onClick:this.focus,role:"presentation"},b("React").createElement(b("UFIActorIconContainer.react"),babelHelpers["extends"]({},N,{actorID:this.props.viewerActorID,actorSelectorConfig:this.props.contextArgs.actorSelectorConfig,isLivingRoom:this.props.contextArgs.isLivingRoom,overlayActorSelectorOnUFIPhoto:this.props.contextArgs.overlayActorSelectorOnUFIPhoto}))),E)}F=b("React").createElement("div",{ref:function(b){return a.rootNode=b},id:D,className:b("joinClasses")("UFIRow _4oep UFIAddComment"+(this.props.allowPhotoAttachments?" UFIAddCommentWithPhotoAttacher":"")+(this.props.withoutSeparator?" UFIAddCommentWithoutSeparator":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights?" hidden_elem":""),this.props.className),onKeyDown:this.$19,"data-ft":B},this.$77(),this.$78(),this.$79(),E,this.$52(),this.$53(),this.$55(),this.$50(),this.$56(),this.$80());s=b("ifRequired")("LiveVideoQuickComments.react",function(a){return a});H=this.props.contextArgs.liveVideoQuickCommentsConfig!=null&&s!=null?b("React").createElement(s,{contextArgs:this.props.contextArgs,videoID:this.props.contextArgs.liveVideoQuickCommentsConfig.videoID,modes:this.props.contextArgs.liveVideoQuickCommentsConfig.modes}):null;return H?b("React").createElement("div",null,H,F):F};f.componentDidUpdate=function(a,b){if(!b.attachedPhoto&&this.state.attachedPhoto||!b.attachedSticker&&this.state.attachedSticker||!b.attachedVideo&&this.state.attachedVideo||!b.attachedFile&&this.state.attachedFile||!b.attachedGIF&&this.state.attachedGIF||!b.attachedStars&&this.state.attachedStars||!b.isCommenting&&this.state.isCommenting){b=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedFile||this.state.attachedSticker||this.state.attachedGIF||this.state.attachedStars;this.setState({hasAttachment:!!b});this.refs.mentionsinput.focus()}a.viewerActorID!==this.props.viewerActorID&&(this.state.fileInput&&this.state.fileInput.clear(),this.state.fileUploader&&this.state.fileUploader.setData(this.$34()),this.$37())};f.componentDidMount=function(){__p&&__p();var a=this;this.$1=!0;if(this.props.contextArgs.source===b("FeedbackSourceType").NEWS_FEED){var c=this.props.replyCommentID!=null;c?b("UFIODSLogger").bump("composer.newsfeed.replies.componentDidMount",b("UFIVersion").LEGACY):b("UFIODSLogger").bump("composer.newsfeed.toplevel.componentDidMount",b("UFIVersion").LEGACY)}this.$23=b("throttle")(this.$23,v,this);this.$12=b("Arbiter").subscribe("UFIComment/insertComposerPayload/"+this.props.contextArgs.ftentidentifier,function(b,c){if(!c||c.instanceid!==void 0&&c.instanceid!==a.props.contextArgs.instanceid||!a.props.isTopLevelComposer)return;a.focus();c.mention!==void 0&&a.insertMention(c.mention);c.emojitext!==void 0&&a.insertEmojiText(c.emojitext);c.stickerid!==void 0&&a.$81(c.stickerid)});this.$13=b("Arbiter").subscribe("UFIComment/"+this.props.contextArgs.ftentidentifier+"/selectGif",function(b,c){if(!c||a.$22())return;a.focus();a.$82({attachedGIF:c.gif});a.preprocessGIF(c.gif)});this.$14=b("Arbiter").subscribe("InsightsComments/"+this.props.contextArgs.ftentidentifier+"/selectedInsightsPoint/",function(c,d){if(!d)return;a.setState({selectedInsightPoint:d.selectedInsightPoint});c=b("ReactDOM").findDOMNode(a.refs.mentionsinput);c!==null&&d.selectedInsightPoint&&c instanceof Element&&b("DOMScroll").ensureVisible(c,null,null,null,function(){window.setTimeout(function(){return a.refs.mentionsinput.focus()})})});if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments&&!this.props.allowFileAttachments)return;this.$15=b("Arbiter").subscribe("UFIComment/"+this.props.contextArgs.ftentidentifier+"/attachCreatedGif",function(b,c){if(!c||a.$22())return;a.focus();a.setState({videoProgress:100,attachedVideo:{fbid:c.videoID},videoStatus:x.ENCODE,videoTrimParams:c.trimParams})});this.$22()===null&&(this.$10=b("Arbiter").subscribe("focusCommentField"+this.props.contextArgs.ftentidentifier,function(b){a.refs.mentionsinput.focus()}),this.props.contextArgs.issnowlift&&(this.$11=b("Arbiter").subscribe("newRemixedImage"+this.props.contextArgs.ftentidentifier,function(b,c){b={clipboardData:{items:[c]}};a.$33(b)})))};f.$78=function(){return this.state.constituentBannerState&&!this.$22()?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentingAsConstituentHeader.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),uri:this.props.constituentBanner}):null};f.$77=function(){var a=this.props,c=a.contextArgs;a=a.isTopLevelComposer;var d=c.conversationGuideParams;d=d?d.trackingID:null;return a&&b("cr:719006")?b("React").createElement(b("cr:719006"),{position:"above",trackingID:d,contextArgs:c,ufiContextDispatch:this.context.dispatch,isComposerFocused:this.state.isFocused}):null};f.$76=function(){var a=this,c=this.props.isEditing&&this.props.editingComment.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER,d=this.$22()&&this.props.replyCommentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER,e=!c&&!d&&this.props.allowTogglePrivateComments;if(!c&&!d&&!this.props.allowTogglePrivateComments||!(e?b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled:b("PrivateCommentsConfig").reply_composer_lock_enabled))return null;e?(b("Bootloader").loadModules(["PrivateCommentsLogger"],function(b){return b.startFunnel(a.props.contextArgs.ftentidentifier)},"UFIAddComment.react"),c=h._("Mostra\/nascondi privacy")):d?c=h._("Only you and {user} will be able to see your reply",[h._param("user",this.props.privateCommentTarget)]):c=h._("Visibile solo a te e {user}",[h._param("user",this.props.privateCommentTarget)]);return b("React").createElement(b("Link.react"),{"aria-label":c,className:"_r1a UFICommentPrivacyButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":c,onClick:function(){a.markViewerHasInteracted(),e&&(m.logToggle(a.state.commentPrivacy===b("CommentPrivacyValue").DEFAULT_PRIVACY,a.props.contextArgs.ftentidentifier),a.setState(function(a){return{commentPrivacy:a.commentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER?b("CommentPrivacyValue").DEFAULT_PRIVACY:b("CommentPrivacyValue").OWNER_OR_COMMENTER}}))},role:"button"},b("React").createElement("div",{ref:"privacy_icon",className:"UFICommentPrivacyIcon"+(b("PrivateCommentsConfig").composer_unlocked_lock_enabled?" UFICommentPrivacyIconVariant":"")+(!e||this.state.commentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER?" UFICommentPrivacyIconActive":"")}),e?this.$57():null)};f.$79=function(){return this.props.isEditing||this.state.commentPrivacy!==b("CommentPrivacyValue").OWNER_OR_COMMENTER||!b("PrivateCommentsConfig").privacy_text_above_composer_enabled?null:this.$22()?b("React").createElement("div",{className:"_2tpi"},h._("Replying privately to {=[user]}",[h._param("=[user]",b("React").createElement("strong",null,h._("{user}",[h._param("user",this.props.privateCommentTarget)])))])):b("React").createElement("div",{className:"_2tpi"},h._("Visibile solo a te e {=[user]}",[h._param("=[user]",b("React").createElement("strong",null,h._("{user}",[h._param("user",this.props.privateCommentTarget)])))]))};f.$80=function(){var a=this;return this.state.showFailedMessageDialog?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(B,{contextArgs:this.props.contextArgs,onHide:function(){a.setState({showFailedMessageDialog:!1}),a.refs.mentionsinput.focus()},showFailedDialog:this.state.showFailedMessageDialog})):null};f.insertMention=function(a){var b=this;this.refs.mentionsinput&&this.refs.mentionsinput.insertMention&&(this.refs.mentionsinput.insertMention(a),window.setTimeout(function(){return b.refs.mentionsinput.focus()}))};f.insertEmojiText=function(a){this.refs.mentionsinput.getText().trim()===""?this.refs.mentionsinput.insertEmoticon(a.trim()+" "):this.refs.mentionsinput.insertEmoticon(a)};f.$83=function(a){return a==="finish"};f.$84=function(){this.state.fileInput&&this.state.fileInput.clear()};f.$82=function(a){if(!b("CurrentUser").isWorkUser())this.setState(a);else{var c={attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedGIF:null,attachedSticker:null,attachedStars:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:!1,videoProgress:0,isVideoFileTranscodedGIF:!1,hasAttachment:!1};this.setState(babelHelpers["extends"]({},c,a))}};f.$81=function(a){this.setState({attachedSticker:null,isLoadingPhoto:!0}),new(b("AsyncRequest"))(u).setData({sticker_id:a}).setErrorHandler(this.$74).setHandler(this.$85).send()};f.sendSticker=function(a,c){a={encodedValue:"",visibleValue:"",attachedPhoto:null,attachedSticker:{fbid:a},privacy_value:this.state.commentPrivacy};this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,a,c.target,this.$22()))};f.isPromotionMatchingEnabled=function(a){return a!=null&&a.isEnabled&&a.type==="SPEND_MATCH"};f.getMatchingStarTippedValue=function(a,b){return b!=null&&this.isPromotionMatchingEnabled(b)?Math.min(b.maxQuantity,a):0};f.$86=function(){this.setState({gifsInCommentsNUXVisible:!1})};f.$47=function(){this.setState({addCommentNUXShown:!1})};f.preprocessGIF=function(a){var c=b("XUFICommentGIFPreprocessController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setData({gif_url:a.source.url}).send()};f.sendGIF=function(a){a={encodedValue:"",visibleValue:"",attachedShareURL:a.source.url,privacy_value:this.state.commentPrivacy};this.rootNode&&this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,a,this.rootNode,this.$22()))};f.parseTextForMentions=function(a){var b=[],c;while(c=z.exec(a)){c={uid:c[1],text:c[2],offset:c.index,length:c[2].length,weakreference:!1,entity:{uid:c[1],weakreference:!1}};b.push(c);z.lastIndex=c.offset+c.length}return b};f.markViewerHasInteracted=function(){this.props.markViewerHasInteracted&&this.props.markViewerHasInteracted()};f.$22=function(){return this.props.replyCommentID||this.state.currentThreadedFacecastCommentID};return d}(b("React").Component);d.contextTypes={dispatch:c.func};e.exports=d}),null);
__d("UFIAddCommentLink.react",["cx","fbt","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("UFIRow UFIAddCommentLink"+(this.props.isFirstCommentComponent?" _48pi":"")+(this.props.isLastCommentComponent?" UFILastCommentComponent":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")),c=h._("Scrivi un commento...");return b("React").createElement("div",{className:a,"data-ft":this.props["data-ft"]},b("React").createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},c))};return c}(b("React").Component);e.exports=a}),null);
__d("UFIActor.react",["cx","fbt","Badge.react","Focus","HovercardLink","Locale","React","ReactDOM","UFICommentUtils","UserHovercardLocation"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.focusOnMount&&b("Focus").setWithoutOutline(b("ReactDOM").findDOMNode(this.refs.authorName))};d.render=function(){__p&&__p();var a=this,c=this.props.author,d=b("Locale").isRTL()?"rtl":"ltr",e=(this.props.isAuthorWeakReference?"weakReference":"")+" UFICommentActorName",f=[];this.props.isAuthorWeakReference&&f.push(b("React").createElement("i",{className:"UFIWeakReferenceIcon",key:"icon"}));this.props.author.badgeSrc&&this.props.author.badgeSrc.length>0&&f.push(b("React").createElement("span",null,b("React").createElement(b("Badge.react"),{type:"subscription",size:"medium",key:"badge"})," "));c.persona?f.push(h._("{author} ({persona})",[h._param("author",c.firstName),h._param("persona",c.persona)])):this.props.useFirstName?f.push(c.firstName):this.props.author.isBusinessPersona&&this.props.author.assetRole?f.push(c.name+" "+h._("(")+this.props.author.assetRole+h._(")")):f.push(c.name);this.props.isAuthorNonCoworker?f.push(b("React").createElement(b("Badge.react"),{key:"noncoworker",type:"work_non_coworker"})):this.props.isAuthorBot&&f.push(b("React").createElement(b("Badge.react"),{key:"bot",type:"bot"}));var g=this.props.isAdminViewer?b("UserHovercardLocation").UFI_ADMIN:b("UserHovercardLocation").UFI,i=Object.assign({},this.props);delete i.author;delete i.delimiter;delete i.dialogUrl;delete i.disableAuthorLink;delete i.focusOnMount;delete i.groupOrEventID;delete i.hovercardLocation;delete i.isAdminViewer;delete i.isAuthorBot;delete i.isAuthorNonCoworker;delete i.isAuthorWeakReference;delete i.isPublic;delete i.showHovercard;delete i.useFirstName;g=this.props.showHovercard?b("HovercardLink").constructEndpointWithGroupLocationAndExtraParams(c,this.props.groupOrEventID,this.props.hovercardLocation?this.props.hovercardLocation:g,this.props.isAuthorWeakReference,{is_public:this.props.isPublic}).toString():null;var j=c.uri&&!this.props.disableAuthorLink;c=j?b("UFICommentUtils").annotateProfileURIIfPublic(!!this.props.isPublic,c.uri):null;j=j?b("React").createElement("a",babelHelpers["extends"]({},i,{className:e,"data-hovercard":g,"data-ft":this.props["data-ft"],dir:d,href:c,ref:"authorName"}),f):b("React").createElement("span",{className:e,dir:d,ref:"authorName"},f);this.props.dialogUrl&&(j=b("React").createElement("a",babelHelpers["extends"]({},i,{className:e,"data-hovercard":g,"data-ft":this.props["data-ft"],dir:d,ajaxify:this.props.dialogUrl,rel:"dialog",href:c,ref:"authorName"}),f));return b("React").createElement("span",null,j,b("React").Children.map(this.props.children,function(b){return b?[b.key==="badge"||b.key==="constituentTitle"||b.key==="moderatorBadge"||b.key==="friendsOnlyBadge"||b.key==="groupMemberBadge"?"":a.props.delimiter,b]:null}))};return c}(b("React").Component);a.defaultProps={delimiter:" \xb7 ",isAdminViewer:!1,isPublic:!1};e.exports=a}),null);
__d("StaticUFI.react",["csx","cx","invariant","Arbiter","BanzaiODS","BlueBar","BootloadedComponent.react","BootloadOnRender.react","CommentPrivacyValue","DOM","FbFeedCommentUFIScroller","FBFeedLocations","FluxContainer","JSLogger","JSResource","LazyComponent.react","LogHistory","Parent","PrivateCommentsConfig","React","ReactDOM","SearchableEntry","SubscriptionsHandler","SutroBlingBarGatingConfig","TrackingNodes","UFIAddComment.react","UFIAddCommentLink.react","UFIComment.react","UFICommentDisabledNotice.react","UFICommentEditIDStore","UFICommentFilters","UFICommentHeader.react","UFICommentListVisibilityTracker.react","UFIComments","UFICommentScrollableArea.react","UFICommercialBreakStore","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIComponentLogger.react","UFIComponents","UFIConfig","UFIConstants","UFIContainer.react","UFIInteractionStore","UFILikeSentence.react","UFILivePinnedCommentStore","UFILiveTypingIndicatorContainer.react","UFILocallyComposedCommentStore","UFINewCommentsPillUtils","UFIODSLogger","UFIOrderingModeStore","UFIPagerGenerator","UFIPaging","UFIPlayLiveVODHighlightsStore","UFIReplySocialSentence.react","UFIShareRow.react","UFISpamPlaceholderContainer.react","UFIStoryAction","UFIThreadedFacecastCommentsStore","UFIThreadedFacecastCommentsUtils","UFITranslateAllRow.react","UFITTLEndLoggerUtil","UFIUIEvents","UFIVersion","URI","XUISpinner.react","distinctArrayBy","emptyFunction","getElementPosition","getElementRect","getUnboundedScrollPosition","gkx","ifRequired","qex","shallowEqual"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("UFIConfig").UFICommentFilterFallbackWarning||null,k=b("UFIConstants").UFIFeedbackSourceType,l=b("UFIConstants").UFIPayloadSourceType,m=b("UFIConstants").UFIStatus;a=b("React").PropTypes;var n=b("JSLogger").create("StaticUFI"),o=b("React").createElement("div",{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},b("React").createElement(b("XUISpinner.react"),{size:"large"})),p=b("React").createElement("div",{className:"_xtv _32k4"},b("React").createElement("i",null));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$5=b("React").createRef();d.$42=function(a){b("UFINewCommentsPillUtils").handleScroll(d.props.contextArgs,a)};d.$38=function(a){a.preventDefault(),b("UFINewCommentsPillUtils").scrollToBottom(d.$5.current,d.props.contextArgs.liveVideoNewCommentsPillConfig)};d.loadMoreComments=function(){if(d.$1&&d.refs.topLevelBottomPager&&!(d.props.contextArgs.ftentidentifier in d.props.isActiveLoading)){var a=b("ReactDOM").findDOMNode(d.refs.topLevelBottomPager),c=b("getUnboundedScrollPosition")(window).y;c=c+(document.documentElement?document.documentElement.clientHeight:0)+b("UFIConstants").infiniteScrollRangeForQANDAPermalinks;a instanceof HTMLElement&&a.offsetHeight&&a.offsetTop<c&&d.refs.topLevelBottomPager.props.onPagerClick()}};d.onComment=function(){__p&&__p();var a=b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)),c=null,e=null,f=null;a instanceof Node&&(c=b("Parent").byTag(a,"form"),e=b("Parent").bySelector(a,"#fbPhotoSnowliftDetails"),f=b("Parent").bySelector(a,"._3g6d"));a=[function(){return d.refs.toplevelcomposer},function(){return d.$46(c)},function(){return d.$46(e)},function(){return d.$46(f)}];a=a.reduce(function(a,b){return a||b()},null);a&&(a.focus(),b("FbFeedCommentUFIScroller").reveal(b("ReactDOM").findDOMNode(a)))};c=d.props.focusReply;d.state={focusReply:c,viewerHasClickedCommentComposer:!1,viewerHasClickedSeeMore:!1,editcommentid:b("UFICommentEditIDStore").getForInstance(d.props.contextArgs.instanceid),localCommentIDs:b("UFILocallyComposedCommentStore").getStateForInstance(d.props.contextArgs.instanceid),inCommercialBreak:b("UFICommercialBreakStore").getValueFor(d.props.contextArgs.instanceid),isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(d.props.contextArgs.instanceid),currentThreadedFacecastCommentID:null,hasNotMounted:!0};return d}c.getStores=function(){return[b("UFIThreadedFacecastCommentsStore")]};c.calculateState=function(a,c){c=c.contextArgs;c=b("UFIThreadedFacecastCommentsStore").getCommentID(c.instanceid);return babelHelpers["extends"]({},a,{currentThreadedFacecastCommentID:c})};var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this;this.setState({hasNotMounted:!1});b("UFIODSLogger").bump("componentDidMount",b("UFIVersion").LEGACY);b("UFITTLEndLoggerUtil").endCommentTTLMarker(this.props.feedback,this.props.ranges);this.$1=!0;b("Arbiter").inform("UFI/displayDone-"+this.props.contextArgs.instanceid);this.$2=new(b("SubscriptionsHandler"))();this.$6();this.$2.addSubscriptions(b("UFICommentEditIDStore").addListener(function(){a.setState({editcommentid:b("UFICommentEditIDStore").getForInstance(a.props.contextArgs.instanceid)})}),b("UFILocallyComposedCommentStore").addListener(function(){a.setState({localCommentIDs:b("UFILocallyComposedCommentStore").getStateForInstance(a.props.contextArgs.instanceid)})}),b("UFICommercialBreakStore").addListener(function(){a.setState({inCommercialBreak:b("UFICommercialBreakStore").getValueFor(a.props.contextArgs.instanceid)})}),b("UFIPlayLiveVODHighlightsStore").addListener(function(){a.setState({isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(a.props.contextArgs.instanceid)})}))};d.UNSAFE_componentWillReceiveProps=function(a){this.props.focusReply!==a.focusReply&&this.setState({focusReply:a.focusReply})};d.componentWillUnmount=function(){this.$1=!1,this.$2&&this.$2.release()};d.shouldComponentUpdate=function(a,c){var d=this.props,e=this.state;return!b("shallowEqual")(e,c)||!b("shallowEqual")(e.loadingSpamIDs,c.loadingSpamIDs)||!b("shallowEqual")(e.localCommentIDs,c.localCommentIDs)||!b("shallowEqual")(e.inCommercialBreak,c.inCommercialBreak)||!b("shallowEqual")(d,a)||!b("shallowEqual")(d.feedback,a.feedback)||!b("shallowEqual")(d.repliesMap,a.repliesMap)||!b("shallowEqual")(d.commentCounts,a.commentCounts)||!b("shallowEqual")(d.deletedCounts,a.deletedCounts)||!b("shallowEqual")(d.privateDeletedCounts,a.privateDeletedCounts)||!b("shallowEqual")(d.availableComments,a.availableComments)||!b("shallowEqual")(d.availablePrivateComments,a.availablePrivateComments)||!b("shallowEqual")(d.ranges,a.ranges)||!b("shallowEqual")(d.authorProfiles,a.authorProfiles)||!b("shallowEqual")(d.commentPermalinks,a.commentPermalinks)||!b("shallowEqual")(d.canAddCommentMap,a.canAddCommentMap)||!b("shallowEqual")(d.canReplyMap,a.canReplyMap)||!b("shallowEqual")(d.isActiveLoading,a.isActiveLoading)||!b("shallowEqual")(d.allSeenActiveLoadDirectionData,a.allSeenActiveLoadDirectionData)||!b("shallowEqual")(d.repliesExpandedMap,a.repliesExpandedMap)||!b("shallowEqual")(d.loadingTranslationsMap,a.loadingTranslationsMap)||!b("shallowEqual")(e.isPlayingLiveVODHighlights,c.isPlayingLiveVODHighlights)||!b("shallowEqual")(d.privateCommentsRange,a.privateCommentsRange)||d.privateCommentsCount!==a.privateCommentsCount||!b("shallowEqual")(d.loadingCommentsForSection,a.loadingCommentsForSection)};d.UNSAFE_componentWillUpdate=function(a,c){this.$3=this.$3||!this.$7(this.props.payloadSource)&&this.props.source===k.NEWS_FEED&&b("BlueBar").hasFixedBlueBar();if(this.$3&&!this.$4){a=b("ReactDOM").findDOMNode(this);a instanceof Element&&(this.$4=b("getElementRect")(a))}};d.componentDidUpdate=function(a,c){this.$6(a);if(this.$3&&this.$4){c=this.$8(this.$4);c!==null&&b("Arbiter").inform("ufi/didUpdate",{offsetY:c});this.$3=!1;this.$4=null}b("shallowEqual")(a.availableComments,this.props.availableComments)||this.$9(a.availableComments,this.props.availableComments)};d.$9=function(a,c){a=b("UFINewCommentsPillUtils").findNumNewComments(a,c);if(a>0){c=this.props.contextArgs;b("Arbiter").inform(b("UFIUIEvents").CommentChanged,{ftentidentifier:c.ftentidentifier});b("UFINewCommentsPillUtils").dispatchNewCommentAction(b("UFIStoryAction").handleNewComments(c,a),c)}};d.$7=function(a){return a===l.UNKNOWN||a===l.INITIAL_SERVER||a===l.USER_ACTION||a===l.COLLAPSE_ACTION};d.$8=function(a){var c=b("getElementPosition")(b("BlueBar").getMaybeFixedRoot());if(a.bottom<c.height){c=a.bottom-a.top;a=b("ReactDOM").findDOMNode(this);if(a instanceof HTMLElement)return a.offsetHeight-c}return null};d.$10=function(){var a=this.props,b=a.contextArgs,c=a.commentCounts,d=a.deletedCounts;a=a.feedback;a=a.commentcountreduced;b=b.ftentidentifier;var e=null;this.$11()&&(a&&isNaN(a)?e=a:e=c[b]-d[b]);return e};d.$6=function(a){__p&&__p();if(this.props.loadingComments)return;this.props.focusTopLevelComposer&&this.onComment();if(this.state.focusReply){a=this.state.focusReply;var c=a.replyID;a=a.initiatorComment;if(!(c in this.refs))return;c=this.refs[c]&&this.refs[c].refs&&this.refs[c].refs.mentionsinput;if(!c)return;c.focus();b("FbFeedCommentUFIScroller").reveal(b("ReactDOM").findDOMNode(c));this.setState({focusReply:null});if(!a)return;var d=c.hasEnteredText(),e=a.author===this.props.feedback.actorforpost,f=!!a.parentcommentid;!d&&!e&&f&&c.insertMention(this.$12(a.author))}};d.$12=function(a){a=this.props.authorProfiles[a];var c=a.type;return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:c==="friend"?"user":c})};d.$13=function(){return this.props.source===k.ADS};d.$14=function(){return this.props.source===k.LIVE_VIDEO};d.$15=function(){return this.props.source===k.GAMESHOW_DASH};d.$16=function(){var a=this.props.contextArgs;a=a.feedcontext&&JSON.parse(a.feedcontext);return!!(a&&a.is_narrow)};d.$17=function(){return this.props.source===k.COMPACT_SEARCH};d.$18=function(){var a=this.props,c=a.hideOrderingModeSelector,d=a.feedback,e=a.commentCounts;a=a.contextArgs;return!c&&d.orderingmodes&&!this.$15()&&!this.$17()&&e[a.ftentidentifier]>=b("UFIConstants").minCommentsForOrderingModeSelector};d.$19=function(){return!!this.props.contextArgs.hasReactions&&(this.props.contextArgs.feedbackMode==="none"||this.props.contextArgs.feedbackMode==="toggle")&&this.props.feedback.displayreactions&&!this.$20()&&this.props.feedback.orderingmodes&&!this.props.hideOrderingModeSelector};d.$21=function(){var a=this.props,b=a.contextArgs;a=a.ranges;b=b.ftentidentifier;a=a[b].getLength();return this.$22(b,a)};d.$22=function(a,b){var c=this.props.commentCounts;return c[a]==b};d.$23=function(){var a=this.props,b=a.contextArgs;a=a.feedback;return a.seencount>0&&!b.entstream};d.$24=function(){return b("UFILikeSentence.react").rendersSocialSentence(this.props)};d.$25=function(){var a=this.props;return Boolean(a.contextArgs.showCommentHeader)};d.$26=function(){var a=this.props,b=a.contextArgs;a=a.feedback;return this.$13()||this.$14()||b.search||this.hasReactions(a,b)};d.$20=function(){return this.$26()?!1:this.$24()||this.$23()||this.$18()||this.$25()};d.$27=function(){var a=this.props,b=a.contextArgs;a=a.feedback;return this.$13()?!1:Boolean(b.showshares&&a.sharecount&&!this.hasReactions(a,b))};d.$28=function(){var a=b("SutroBlingBarGatingConfig").enabled;return this.$27()&&!this.props.contextArgs.entstream&&!a};d.$11=function(){if(this.$13()||this.$17())return!1;if(this.props.contextArgs.shouldHideCommentsWhenCannotReply&&(this.props.feedback.arecommentsdisabled||!this.$29()||!this.props.feedback.cancomment))return!1;var a=this.props,b=a.availableComments;a=a.availablePrivateComments;return!!(b&&b.length||a&&a.length)};d.$29=function(){var a=this.props,c=a.canAddCommentMap,d=a.contextArgs;a=a.feedback;return this.props.contextArgs.feedLocationType!==b("FBFeedLocations").SURVEY_GALLERY&&a.cancomment&&Boolean(d.showaddcomment)&&Boolean(d.showInlineComposer)&&Boolean(a.actorforpost)&&c[d.ftentidentifier]};d.$30=function(){return this.$29()&&this.$31()&&this.props.hasPagedToplevel};d.$32=function(){var a=this.props.feedback;return a.arecommentsdisabled===!0&&a.cancomment===!1};d.$33=function(){var a=this.props.feedback;return a.isviewermuted===!0&&a.cancomment===!1};d.$34=function(){if(!this.$28())return!1;var a=this.props.contextArgs.isPermalink;a=a?this.$10():null;return Boolean(a)&&Number(a)!==0};d.$35=function(){if(!this.$28())return null;var a=this.props,c=a.contextArgs;a=a.feedback;var d=this.$34()?this.$10():null;return b("React").createElement(b("UFIShareRow.react"),{contextArgs:c,feedback:a,shownCommentCount:d})};d.$36=function(){var a=this.props,c=a.feedback,d=a.contextArgs;a=a.commentCounts;return this.$20()?b("React").createElement(b("UFILikeSentence.react"),{contextArgs:d,feedback:c,commentCounts:a,showOrderingModeSelector:this.$18(),hasCommentOrderInverted:this.$31(),key:"ufi_like_sentence"}):null};d.$37=function(){var a=this.props.authorPinnedComment;if(a&&a.status!==b("UFIConstants").UFIStatus.DELETED){var c=a.id===this.state.editcommentid?b("UFIAddComment.react").renderEditCommentBox(this.props.contextArgs,a,this.props.feedback):this.renderComment(a,0,!0,!1,!0,!1,!1,!!this.props.loadingTranslationsMap[a.id],!0);a=this.renderReplyContainer(a);return b("React").createElement(b("React").Fragment,null,c,a)}return null};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.feedback,e=c.contextArgs,f=c.source;if(e.hideComments)return null;var g=this.$32(),h=this.$33(),i=this.$27(),j=this.$36(),l=!!j,m=this.$37();g=g||h?b("React").createElement(b("UFICommentDisabledNotice.react"),{feedback:c.feedback}):null;h=e.liveVideoNewCommentsPillConfig;var n=null;if(!e.isBroadcasterUFI&&h){var q=h.UFINewCommentsPill;n=b("React").createElement(q,{instanceID:e.instanceid,isLiveVideo:!0,onClick:this.$38})}q=this.$35();if(c.loadingComments)return b("React").createElement(b("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},j,q,o);var r=this.$11(),s=c.ranges[e.ftentidentifier];s=Number(c.loggingOffset)-s.getOffset();var t=d.targetiscomment,u=null;r&&(u=this.renderCommentArray(c.availableComments,s,t,null));s=null;t=null;var v=d.cancomment;l=l||i||r||v;i=l?b("React").createElement(b("UFICommentHeader.react"),null):null;if(this.$29()||e.loggedOutLinkConfig&&e.loggedOutLinkConfig.showAddComment){v=this.$39();if(v){v=b("UFIOrderingModeStore").isLiveStreaming(e.instanceid);(!e.islivestreaming||!v)&&(s=b("React").createElement(b("UFILiveTypingIndicatorContainer.react"),{contextArgs:e,feedbackTargetID:d.targetfbid}));t=b("React").createElement(b("UFIAddComment.react"),{viewerActorID:d.actorforpost,targetID:d.ownerid,targetName:d.actorname,initialData:null,ref:"toplevelcomposer",isTopLevelComposer:!0,withoutSeparator:!1,editingComment:{},isEditing:!1,mentionsDataSource:d.mentionsdatasource,showSendOnEnterTip:d.showsendonentertip,peopleOutsideCommunityInCommentNotice:d.peopleoutsidecommunityincommentnotice,allowVideoAttachments:d.allowvideoattachments&&!v,allowPhotoAttachments:d.allowphotoattachments&&!v,allowFileAttachments:d.allowfileattachments&&!v,allowStickerAttachments:d.allowstickerattachments&&!v,allowCustomStickerAttachmentsV2:d.allowgaminglivestreamcustomstickersv2&&!v,allowGifAttachments:d.allowgifattachments&&!v,allowBotMentions:d.allowbotmentions&&!v,allowNativeTipJar:d.isnativetipjarenabled,allowFlexibleTipping:d.isflexibletippingenabled,allowTogglePrivateComments:(b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled)&&d.canviewercommentinprivate,privateCommentTarget:d.actorname,contextArgs:e,subtitle:d.subtitle,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?b("emptyFunction"):function(){return a.setState({viewerHasClickedCommentComposer:!0})},groupID:d.grouporeventid,allowCommentMarkdown:d.iscommentmarkdowneligible,allowCommentFixSuggestions:(b("gkx")("678286")||b("qex")._("724607"))&&b("UFIConfig").shouldShowWritingHelp,showConstituentBadgeV2OptIn:d.showconstituentbadgev2optin,constituentBanner:d.constituentbanneruri,isFirstComponent:!r||b("SutroBlingBarGatingConfig").enabled&&!this.$20()&&this.$31(),commentsTargetID:d.commentstargetfbid,showAddMentionButton:b("gkx")("678287")&&!v})}}v=e.ftentidentifier;var w=this.renderPagers(v,!1,c.ranges[v].getOffset(),c.ranges[v].getLength()),x=w.topPager;w=w.bottomPager;var y=this.$31()?s:null;s=this.$31()?null:s;v=this.$40(v,x,w);var z=v.topFilterWarning;v=v.bottomFilterWarning;var A=this.$19()?b("React").createElement("div",{className:"_11c1"+(this.$31()?"":" _4204")+(b("SutroBlingBarGatingConfig").enabled?" _4mtp":"")},b("React").createElement(b("BootloadedComponent.react"),{alignh:"left",bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFIOrderingModeSelectorContainer.react").__setRef("StaticUFI.react"),contextArgs:e,feedback:d})):null,B=b("UFIComponents").applyToUFIComponents([m,A,y,x,z].concat(u,[v,w,s]),{isFirstCommentComponent:!0},{isLastCommentComponent:!0}),C=B.slice(0,5);m=C[0];A=C[1];y=C[2];x=C[3];z=C[4];C=B.slice(-3);v=C[0];w=C[1];s=C[2];u=B.slice(5,-3);C=this.$31()?t:null;var D=this.$31()?null:t;m&&(C=null,D=t);t=this.$30()?b("React").createElement(b("UFIAddCommentLink.react"),{onClick:this.onComment}):null;var E=!0,F=null;e.showCommentNuxForGroupMallAds&&(F=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("UFICommentNuxForGroupMallAds.react").__setRef("StaticUFI.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{commentNuxContent:e.groupMallAdsCommentNuxContent})}));B=b("UFIComponents").applyToUFIComponents([j,q,C,A,x,z].concat(u,[v,w,D,t]),{isFirstComponent:E},{isLastComponent:!0});E=B.slice(0,6);j=E[0];q=E[1];C=E[2];A=E[3];x=E[4];z=E[5];E=B.slice(-4);v=E[0];w=E[1];D=E[2];t=E[3];u=B.slice(6,-4);E=!!b("UFIInteractionStore").getValueFor(e.instanceid);B=b("ifRequired")("UFIThreadedFacecastCommentsContainer.react",function(a){return a});c=B!=null&&(c.contextArgs.islivestreaming||c.contextArgs.isLiveVOD)&&this.state.currentThreadedFacecastCommentID!=null&&b("UFIThreadedFacecastCommentsUtils").isEnabled(e);var G=this.$41();f=e.isBroadcasterUFI||f===k.LIVE_VIDEO_STORIES||e.isBottomUpCommentStreamingEnabled||e.isLivingRoom;return c&&B!=null?b("React").createElement(b("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},b("React").createElement(B,{contextArgs:e})):b("React").createElement(b("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},e.shownub&&l?p:null,j,q,m,i,F,C,b("React").createElement(b("UFICommentListVisibilityTracker.react"),{contextArgs:e,inputRef:this.$5,onScroll:h?this.$42:null},b("React").createElement(b("UFICommentScrollableArea.react"),{scrollcomments:!!e.scrollcomments,scrollwidth:e.scrollwidth||0},b("React").createElement(b("UFIComponentLogger.react"),{contextArgs:e,feedback:d,hasComments:r,isPermalink:e.isPermalink,viewerHasInteractedWithComments:E||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},A,y,x,z,f?null:G,u,f?G:null,v,w,s))),D,t,g,n)};d.$41=function(){__p&&__p();var a=b("UFILivePinnedCommentStore").getPinnedCommentID(this.props.contextArgs.ftentidentifier);if(a==null)return null;a=b("UFIComments").getComment(a);if(a==null)return null;var c=a.parentcommentid;if(c!=null){c=b("UFIComments").getComment(c);if(c&&c.status===b("UFIConstants").UFIStatus.DELETED)return null}if(a&&!this.props.authorProfiles[a.author]){b("BanzaiODS").bumpEntityKey("unsampled_feedback","missing_pinned_comment_author");return null}return this.renderComment(a,0,!1,!1,!0,!1,!0,!!this.props.loadingTranslationsMap[a.id])};d.$39=function(){return this.state.editcommentid===null};d.renderCommentArray=function(a,c,d,e){__p&&__p();var f=this,g=this.props,h=g.contextArgs,i=g.feedback,j=g.authorProfiles;g=g.authorPinnedComment;var k=g?!0:!1;if(!a||!a.length)return[];a=b("distinctArrayBy")(a,function(a){return a.id});var l=b("UFICommentFilters").collectSpamBuckets(a,j);return l.reduce(function(a,g,j){__p&&__p();if(!g)return a;if(b("UFICommentFilters").isSpam(g))a.push(b("React").createElement(b("UFISpamPlaceholderContainer.react"),{key:"spam"+g.id,contextArgs:h,viewas:h.viewas,comment:g,parentCommentID:e}));else{if(g.id==f.state.editcommentid)a.push(b("UFIAddComment.react").renderEditCommentBox(h,g,i));else{var m=Math.max(c-j,0),n=j===0&&!k;j=j===l.length-1;var o=!d&&!i.arecommentsdisabled,p=d&&!n;a.push(f.renderComment(g,m,n,j,o,p,!1,!!f.props.loadingTranslationsMap[g.id]));g.id==f.props.translateAllCommentID&&!b("UFIOrderingModeStore").isLiveStreaming(h.instanceid)&&a.push(b("React").createElement(b("UFITranslateAllRow.react"),{key:"translateAll"+g.id,contextArgs:h}))}if(!d&&!b("UFICommentFilters").isDeleted(g)&&!b("UFIOrderingModeStore").isLiveStreaming(h.instanceid)){m=f.renderReplyContainer(g);m&&a.push(m)}}return a},[])};d.renderReplyContainer=function(a){__p&&__p();var c=this,d=this.props,e=d.commentCounts[a.id],f=d.repliesExpandedMap[a.id],g=!f&&a.interestingReplyId,h=d.ranges[a.id];h||n.error("renderReplyContainer range is undefined");var i,j;if(h&&(f||a.interestingReplyId)){i=d.repliesMap[a.id];j=h.getOffset();if(g){var k=i.filter(function(b){return b.id===a.interestingReplyId});k.length!==1?(b("LogHistory").getInstance("ufi").error("comment "+a.id+" claims to have an interesting reply, but there is not exactly 1 comment with that id in the reply list."),i=null):(i=k,j=a.interestingReplyOffset)}}var l;k=null;var o=null,p=null,q=null;if(h&&i){var r=h.getOffset(),s=h.getLength();g&&(r=j,s=1);g=this.renderPagers(a.id,!0,Number(r),s);k=g.topPager;o=g.bottomPager;r=Number(d.loggingOffset)-Number(j);l=this.renderCommentArray(i,r,!0,a.id);s=this.$43(a.id,k,o);p=s.topFilterWarning;q=s.bottomFilterWarning}g=Math.max(e-Number(a.spamreplycount),0);var t;if(h&&!b("UFIOrderingModeStore").isLiveStreaming(this.props.contextArgs.instanceid)&&g&&(f&&i&&i.length>d.replySocialSentenceMaxReplies||!f&&!i)){r=h.isLoadingPrev()||h.isLoadingNext();s=f&&!k&&r;e=null;a.replyauthors&&a.replyauthors.length&&(e=d.authorProfiles[a.replyauthors[0]]);h=i?i.length:0;t=b("React").createElement(b("UFIReplySocialSentence.react"),{contextArgs:d.contextArgs,author:e,replies:f?h:g,timestamp:a.recentreplytimestamp,onClick:function(){return c.context.dispatch(b("UFIStoryAction").toggleReplies(d.contextArgs,a.id))},isLoading:s,isExpanded:f,showVerified:d.feedback.showfeaturedreplies,orderingMode:d.orderingMode})}var u;if(f&&(a.cancomment&&d.canAddCommentMap[a.id]&&!(a.needsApproval||a.canAppeal||a.canSecure))){r=!1;if(l)for(var e=l.length-1;e>=0;e--)if(l[e]){r=l[e].props.isAuthorReply;break}u=this.renderReplyComposer(a,!r)}var v;if(t||k||p||l||q||o||u){h=b("UFIComponents").applyToUFIComponents([t,k,p].concat(l,[q,o,u]),{isFirstComponent:!0},{isLastComponent:!0});g=h.slice(0,3);t=g[0];k=g[1];p=g[2];s=h.slice(-3);q=s[0];o=s[1];u=s[2];l=h.slice(3,-3);f=a.status===m.LIVE_DELETED;v=b("React").createElement(b("UFIContainer.react"),{key:"replies"+a.id,isParentLiveDeleted:f,isPrivateComment:a.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER,isReplyList:!0},t,k,p,l,q,o,u)}return v};d.renderReplyComposer=function(a,c){var d=this.props,e=d.contextArgs,f=d.feedback,g=this.state.editcommentid!==null;g=g&&!a.id;if(g)return null;g=b("UFIOrderingModeStore").isLiveStreaming(e.instanceid);var h=f.actorforpost===a.author;d=d.authorProfiles[a.author];h=a.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER?h?f.actorname:d.name:null;return b("React").createElement(b("UFIAddComment.react"),{viewerActorID:f.actorforpost,replyCommentID:a.id,replyCommentPrivacy:a.privacy_value,groupID:f.grouporeventid,targetID:f.ownerid,initialData:null,ref:"replycomposer-"+a.id,withoutSeparator:c,editingComment:{},isEditing:!1,mentionsDataSource:f.mentionsdatasource,showSendOnEnterTip:!1,peopleOutsideCommunityInCommentNotice:f.peopleoutsidecommunityincommentnotice,allowVideoAttachments:f.allowvideoattachments&&!g,allowPhotoAttachments:f.allowphotoattachments&&!g,allowFileAttachments:f.allowfileattachments&&!g,allowStickerAttachments:f.allowstickerattachments&&!g,allowGifAttachments:f.allowgifattachments&&!g,allowBotMentions:f.allowbotmentions&&!g,allowCommentMarkdown:f.iscommentmarkdowneligible,allowTogglePrivateComments:!1,privateCommentTarget:h,contextArgs:e,subtitle:f.subtitle,showconstituentbadgev2optin:f.showconstituentbadgev2optin,constituentBanner:f.constituentbanneruri,showAddMentionButton:!1})};d.renderComment=function(a,c,d,e,f,g,h,i,j){var l=this;j===void 0&&(j=!1);var m=this.props,n=m.feedback,o=n.actorforpost===a.author,p=a.__typename==="local",q=p||this.state.localCommentIDs[a.id],r=n.showremovemenu||n.viewerid===a.author,s=n.canremoveall&&n.isownerpage&&!o&&!n.grouporeventid,t=m.source!=k.INTERN,u=!!a.parentcommentid,v=a.parentcommentid,w=!0;u&&v&&v in this.props.canReplyMap&&this.props.canReplyMap[v]!==null&&(w=this.props.canReplyMap[v]);u=!!a.isfeatured;v=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.COMMENT,c);c=new(b("URI"))(m.commentPermalinks[a.id]).addQueryData({comment_tracking:v}).toString();return b("React").createElement(b("UFIComment.react"),{key:b("UFIComments").getRenderKey(a.id),isFirst:d,isFirstCommentComponent:d,isLast:e,isStaticUFILoading:this.state.hasNotMounted,showReplyLink:f,hasPartialBorder:g,comment:a,authorProfiles:m.authorProfiles,viewerIsAuthor:o,feedback:n,"data-ft":v,contextArgs:m.contextArgs,hideAsSpamForPageAdmin:s,isLocallyComposed:q,isOptimisticallyRendered:p,isFeatured:u,parentCanComment:w,permalink:c,showPermalink:t,showRemoveReportMenu:r,focusOnMount:a.id===m.commentIDToFocusOnMount,orderingMode:m.orderingMode,featuredCommentIDs:m.featuredCommentIDs,markViewerHasInteracted:this.state.viewerHasClickedSeeMore?b("emptyFunction"):function(){return l.setState({viewerHasClickedSeeMore:!0})},isLivePinnedComment:h,isAuthorPinnedComment:j,showTranslation:i||!!a.translationdata})};d.$40=function(a,b,c){return this.$44(a,b,c,!1)};d.$43=function(a,b,c){return this.$44(a,b,c,!0)};d.$44=function(a,c,d,e){var f=null,g=null;c||(f=this.$45(a,b("UFIPaging").TOP,e));d||(g=this.$45(a,b("UFIPaging").BOTTOM,e));return{topFilterWarning:f,bottomFilterWarning:g}};d.$45=function(a,c,d){var e=this.props.allSeenActiveLoadDirectionData;if(!e)return null;e=e[a];if(!e||!(c in e))return null;e=this.props;return!j||!j.shouldRender(e,a,c,d)?null:b("React").createElement(j,{asReplyWarning:d,targetID:a,pagingDirection:c,ufiProps:e})};d.renderPagers=function(a,c,d,e){__p&&__p();var f=this,g=this.props;if(this.$22(a,e)||this.$13()||this.$17()||!c&&g.hideToplevelPager)return{topPager:null,bottomPager:null};c=g.commentCounts[a];var h=g.deletedCounts[a];Number.isInteger(c)||i(0,255,a);Number.isInteger(h)||i(0,256,a);Number.isInteger(e)||i(0,257);return b("UFIPagerGenerator").renderPagers({commentCount:c,contextArgs:g.contextArgs,currentLength:e,currentOffset:d,deletedCount:h,feedback:g.feedback,onPageCallback:function(c,d){var e=babelHelpers["extends"]({},g.contextArgs,{interactionRequestCorrelationID:b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_TOP_LEVEL_COMMENTS_PAGINATION)});f.context.dispatch(b("UFIStoryAction").pageInComments(e,a,c,d))},orderingMode:g.orderingMode,range:g.ranges[a],targetID:a})};d.$46=function(a){return!a?null:b("DOM").scry(a,'[name="add_comment_text_text"]').concat(b("DOM").scry(a,'[name="add_comment_text"]')).find(function(a){return!b("Parent").byClass(a,"UFIReplyList")})};d.$31=function(){return Boolean(b("UFIOrderingModeStore").isInverted(this.props.orderingMode,this.props.contextArgs.ftentidentifier))};d.hasReactions=function(a,b){return Boolean(a.displayreactions&&b.hasReactions&&(b.feedbackMode==="none"||b.feedbackMode==="toggle"))};return c}(b("React").Component);c.contextTypes={dispatch:a.func};c.defaultProps={commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:!1,loadingSpamIDs:{},loadingTranslationsMap:{}};e.exports=b("FluxContainer").create(c,{pure:!1,withProps:!0})}),null);
__d("UFIActorSelector.react",["csx","fbt","ActorSelector.react","ActorSelectorNuxTypes","Arbiter","AsyncRequest","Parent","React","ReactDOM","SubscriptionsHandler","UFICentralUpdates","UFIFeedbackTargets","UFIODSLogger","UFIUserActions","UFIVersion","XActorSelectorNuxSeenWriteController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i="ufi_actor_selector_nux_disabled_event";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$3=function(a){b("UFIODSLogger").bump("actor_selector.on_change",b("UFIVersion").LEGACY),d.setState({loading:!0}),b("UFIUserActions").changeActor(d.props.ftEntIdentifier,a.value),d.props.onActorChange!=null&&d.props.onActorChange(d.state.selectedActorID,a.value)};d.$5=function(){var a=d.props.isTimeline?b("ActorSelectorNuxTypes").UFI_TIMELINE:b("ActorSelectorNuxTypes").UFI;a=b("XActorSelectorNuxSeenWriteController").getURIBuilder().setEnum("nux_type",a).getURI();new(b("AsyncRequest"))().setURI(a).send()};c=b("UFIFeedbackTargets").getFeedbackTargetIfExists(d.props.ftEntIdentifier);c=c&&c.actorforpost;d.state={loading:!c,nuxEnabled:!!d.props.nuxEnabled,nuxHoverContext:null,selectedActorID:c||null};return d}var d=c.prototype;d.render=function(){return b("React").createElement(b("ActorSelector.react"),{actorIDs:this.props.actorIDs,dialogShown:this.props.dialogShown,loading:this.props.loading||this.state.loading,nuxBody:this.$2(),nuxEnabled:this.state.nuxEnabled,nuxHoverContext:this.state.nuxHoverContext,onChange:this.$3,onShowNux:this.$4,onCompleteNux:this.$5,selectedActorID:this.state.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this.$6,syncEnabled:this.props.syncEnabled,useUFIPhotoOverlay:this.props.useUFIPhotoOverlay})};d.componentDidMount=function(){__p&&__p();var a=this;b("UFIODSLogger").bump("actor_selector.component_did_mount",b("UFIVersion").LEGACY);this.$7();this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("UFICentralUpdates").subscribe("feedback-updated",function(b,c){a.props.ftEntIdentifier in c.updates&&a.$7()}),b("Arbiter").subscribe(i,function(){a.setState({nuxEnabled:!1})}));if(this.state.nuxEnabled){var c=b("ReactDOM").findDOMNode(this);if(c){c=b("Parent").bySelector(c,"._5pcr");c instanceof HTMLElement&&this.setState({nuxHoverContext:c})}}};d.componentWillUnmount=function(){this.$1.release()};d.$7=function(){var a=this;b("UFIFeedbackTargets").getFeedbackTarget(this.props.ftEntIdentifier,function(b){if(a.state.loading===!1&&a.state.selectedActorID===b.actorforpost)return;a.setState({loading:!1,selectedActorID:b.actorforpost})})};d.$2=function(){return h._("Metti \"Mi piace\", commenta o condividi contenuti a tuo nome o a nome delle Pagine che gestisci.")};d.$6=function(a){return h._("Stai mettendo \"Mi piace\" e commentando come {actorName}",[h._param("actorName",a)])};d.$4=function(){b("Arbiter").inform(i)};return c}(b("React").PureComponent);c.propTypes={actorIDs:a.array.isRequired,dialogShown:a.bool,ftEntIdentifier:a.string.isRequired,isTimeline:a.bool,loading:a.bool,nuxEnabled:a.bool,onActorChange:a.func,settingsURI:a.string,syncEnabled:a.bool,useUFIPhotoOverlay:a.bool};e.exports=c}),null);